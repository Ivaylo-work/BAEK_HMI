var TcHmi;!function(e){!function(t){let n;!function(n){let o;!function(n){class o extends e.Controls.Beckhoff.TcHmiDatagrid{constructor(e,n,s){super(e,n,s),this.__eventDestroyFunctions=[],this.__controlCnt={base:0,eventIcons:0},this.logger=new t.Logger({name:this.__id}),this.childrenHandler=new t.Components.BaseNode.ChildrenHandler(this),this.__controlInteractionHandler=(e,n)=>{if(1==n.getReadOnly())return;let s=Number(n.getElement()[0].dataset.row),i=Number(n.getElement()[0].dataset.column),r=n.getElement().parent().parent()[0],l=void 0,a=this.getSrcColumn()[i];switch(a.type){case o.ControlType.ToggleButton:n instanceof t.Components.ToggleButton&&(l=n.getToggleState());break;case o.ControlType.DateTimeField:n instanceof t.Components.DateTimeField&&(l=n.getDate());break;case o.ControlType.Combobox:n instanceof t.Components.Combobox&&(l=n.getSelectedValue());break;case o.ControlType.InputBox:n instanceof t.Components.InputBox&&(l=n.getValue());break;case o.ControlType.Checkbox:n instanceof t.Components.Checkbox&&(l=n.getState());break;case o.ControlType.Slider:n instanceof t.Components.Slider&&(l=n.getValue())}if(void 0!==l){let e=this.__modifySrcData(l,s,i,r);e&&e.needSorting&&(this.__filterAndSort(),this.__updateTable(0))}let c=a;c.internalCallback&&(c.settings||(c.settings={}),c.settings.callbackParams={columnData:this.__srcData[s][a.name],rowData:this.__srcData[s]},c.internalCallback())}}__previnit(){super.__previnit()}__init(){super.__init(),null!=this.__rowHeight&&this.__element.css("--tchmi-ba-data-grid-row-height",this.__rowHeight+"px")}__attach(){super.__attach(),this.__propertyChangedDf=e.EventProvider.register(this.__id+".onPropertyChanged",(e,t)=>{null!=t.propertyName&&"RowHeight"===t.propertyName&&null!=this.__rowHeight&&this.__element.css("--tchmi-ba-data-grid-row-height",this.__rowHeight+"px")})}__detach(){super.__detach(),this.__propertyChangedDf&&this.__propertyChangedDf()}destroy(){if(!this.__keepAlive){for(let e of this.childrenHandler.getChildren().values())e.destroy();super.destroy()}}__fillCell(e,n,s){if(o.isColumn(n)){let i;switch(super.__fillCell(e,{control:"",label:n.label,name:n.name,width:n.width,widthUnit:n.widthUnit},null),null==n.settings&&(n.settings={}),null==n.settings.textAttributes&&(n.settings.textAttributes={}),void 0!==n.textColor&&void 0===n.settings.textAttributes.color&&(n.settings.textAttributes.color=t.Color.RGBAColor.fromSolidColor(n.textColor)),void 0!==n.editable&&void 0===n.settings.readOnly&&(n.settings.readOnly=!n.editable),void 0!==n.horizontalAlignment&&void 0===n.settings.textAttributes.horizontalAlignment&&(n.settings.textAttributes.horizontalAlignment=n.horizontalAlignment),void 0!==n.horizontalAlignment&&void 0===n.settings.textAttributes.horizontalAlignment&&(n.settings.textAttributes.horizontalAlignment=n.horizontalAlignment),n.type!=o.ControlType.Combobox&&n.type!=o.ControlType.InputBox&&e.setAttribute("tabindex","0"),n.type){case o.ControlType.Button:case o.ControlType.ToggleButton:case o.ControlType.DateTimeField:case o.ControlType.Combobox:case o.ControlType.InputBox:case o.ControlType.Checkbox:case o.ControlType.Slider:case o.ControlType.Textblock:case o.ControlType.Image:if(!t.Components.ControlContainer.isIControlOptions(n))throw new Error("Invalid column definition!");let r=e.getElementsByClassName("tchmi-ba-base")[0];switch(r&&(i=this.childrenHandler.getChildren().get(r.id)),i||(i=t.Components.ControlContainer.createControl(this.__id+"-base-"+this.__controlCnt.base,n,this),$(e).append(i.getElement()),this.__controlCnt.base++),i.getElement()[0].dataset.row=e.dataset.row,i.getElement()[0].dataset.column=e.dataset.column,n.type){case o.ControlType.Button:i instanceof t.Components.Button&&this.__eventDestroyFunctions.push(i.eventHandler.register(t.Components.Button.ButtonEvents.onPressed,this.__controlInteractionHandler));case o.ControlType.ToggleButton:i instanceof t.Components.ToggleButton&&(this.__eventDestroyFunctions.push(i.eventHandler.register(t.Components.ToggleButton.ToggleButtonEvents.onToggleStateChanged,this.__controlInteractionHandler)),"boolean"==typeof s&&i.setToggleState(s));break;case o.ControlType.DateTimeField:i instanceof t.Components.DateTimeField&&(this.__eventDestroyFunctions.push(i.eventHandler.register(t.Components.DateTimeField.DateTimeFieldEvents.onUserInteractionFinished,this.__controlInteractionHandler)),s instanceof Date?i.setDate(s):"string"==typeof s&&i.setDate(new Date(s)));break;case o.ControlType.Combobox:i instanceof t.Components.Combobox&&(this.__eventDestroyFunctions.push(i.eventHandler.register(t.Components.Combobox.ComboboxEvents.onUserInteractionFinished,this.__controlInteractionHandler)),"number"==typeof s&&i.setSelectedValue(s));break;case o.ControlType.InputBox:i instanceof t.Components.InputBox&&(this.__eventDestroyFunctions.push(i.eventHandler.register(t.Components.InputBox.InputBoxEvents.onUserInteractionFinished,this.__controlInteractionHandler)),"number"!=typeof s&&"string"!=typeof s||i.setValue(s));break;case o.ControlType.Checkbox:i instanceof t.Components.Checkbox&&(this.__eventDestroyFunctions.push(i.eventHandler.register(t.Components.Checkbox.CheckboxEvents.onUserInteractionFinished,this.__controlInteractionHandler)),"boolean"==typeof s&&i.setState(s));break;case o.ControlType.Slider:i instanceof t.Components.Slider&&(this.__eventDestroyFunctions.push(i.eventHandler.register(t.Components.Slider.SliderEvents.onUserInteractionFinished,this.__controlInteractionHandler)),"number"==typeof s&&i.setValue(s));break;case o.ControlType.Textblock:i instanceof t.Components.Textblock&&("string"==typeof s||"number"==typeof s)&&i.textHandler.setText(s.toString());break;case o.ControlType.Image:i instanceof t.Components.Base&&"string"==typeof s&&(null==n.settings.background&&(n.settings.background={}),void 0===n.settings.background.useSVG&&(n.settings.background.useSVG=!0),void 0===n.settings.background.imageWidth&&i.backgroundStyler.setImageWidth(100,"%"),void 0===n.settings.background.imageHeight&&i.backgroundStyler.setImageHeight(100,"%"),i.backgroundStyler.setImage(s,n.settings.background.useSVG),i.getElement().addClass("image"))}n.formatEx&&n.formatEx(s,i);break;case o.ControlType.EventIcon:if(null!=s&&null!=s.t&&null!=s.s){let n,o=e.getElementsByClassName("event-icon")[0];o&&(n=this.childrenHandler.getChildren().get(o.id)),n||(n=new t.Components.EventIcon(this.__id+"-event-icon-"+this.__controlCnt.eventIcons,this),$(e).append(n.getElement()),this.__controlCnt.eventIcons++),n.setEventState(s.s).setEventCondition(s.t).setReadOnly(!0),i=n}else this.logger.log(t.Logger.Severity.debug,this.__id+": Invalid value was set for SrcColumnDataType event!",s)}}else super.__fillCell(e,n,s)}__setRowClasses(e,t){if(super.__setRowClasses(e,t),!this.__srcData)return;let n=this.__srcData[t];n&&this.__rowClassesProviderFunc&&this.__rowClassesProviderFunc(e,n)}setBaParent(e){this.__baParent=e}getBaParent(){return this.__baParent}getCurrentRows(){return this.__elementDataTableBody.find("tr")}removeAllLocalStorage(){window.localStorage.removeItem("TCHMI_TCHMIDATAGRID_USERPREFERENCES_"+this.__id)}setSrcColumn(e){let t=null;if(null!=e)if(e instanceof Array){t=[];for(let n=0;n<e.length;n++){let o=Object.assign(Object.assign({},e[n]),{control:"TextBlock"});t.push(o)}}else t=e;super.setSrcColumn(t)}__processSrcColumn(){if(this.childrenHandler.getChildCount()>0)for(let e of this.childrenHandler.getChildren().values())e.destroy(),this.childrenHandler.removeChild(e);super.__processSrcColumn()}getSrcColumn(){return this.__srcColumn}setRowClassesProvider(e){"function"==typeof e?this.__rowClassesProviderFunc=e:(super.setRowClassesProvider(e),null==e&&delete this.__rowClassesProviderFunc)}}n.DataGrid=o,function(e){let n;!function(e){e[e.Invalid=-1]="Invalid",e[e.Button=0]="Button",e[e.ToggleButton=1]="ToggleButton",e[e.Combobox=2]="Combobox",e[e.Checkbox=3]="Checkbox",e[e.InputBox=4]="InputBox",e[e.DateTimeField=5]="DateTimeField",e[e.Slider=6]="Slider",e[e.Textblock=7]="Textblock",e[e.Image=8]="Image",e[e.EventIcon=9]="EventIcon"}(n=e.ControlType||(e.ControlType={})),e.isColumn=function(e){return t.Components.ControlContainer.isIControlOptions(e)}}(o=n.DataGrid||(n.DataGrid={}))}(o=n.Common||(n.Common={}))}(n=t.Controls||(t.Controls={}))}(e.BuildingAutomation||(e.BuildingAutomation={}))}(TcHmi||(TcHmi={})),TcHmi.Controls.registerEx("DataGrid","TcHmi.BuildingAutomation.Controls.Common",TcHmi.BuildingAutomation.Controls.Common.DataGrid);