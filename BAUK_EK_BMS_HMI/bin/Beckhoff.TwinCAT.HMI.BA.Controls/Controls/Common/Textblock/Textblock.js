var TcHmi;!function(t){!function(e){!function(a){!function(i){class s extends a.System.TextControl{constructor(t,e,a){super(t,e,a)}__previnit(){null==this.__baFc&&(this.__baFc=new e.Components.Textblock(this.__id+"-ba-fc",this)),this.baObjectHandler=new e.BaObjectHandler(this),this.__element.append(this.__baFc.getElement()),super.__previnit()}__init(){super.__init()}__attach(){super.__attach()}__detach(){super.__detach()}destroy(){this.__keepAlive||super.destroy()}__updateBaObjectDisplay(){if(this.baObjectHandler.baObject)switch(this.baObjectHandler.baObject.DataType){case e.DataType.boolean:1==this.__bValue?this.setText(this.__activeText):this.setText(this.__inactiveText);break;case e.DataType.number:this.setText(this.__rValue+" "+this.__unit);break;case e.DataType.enum:null!=this.__stateTexts&&null!=this.__iValue?this.setText(this.__stateTexts.get(this.__iValue)):this.setText("???")}}setBaObject(t){return this.baObjectHandler.setBaObject(t),this}getBaObject(){return this.baObjectHandler.baObject}setText(e){let a=t.ValueConverter.toString(e);return null==a&&(a=this.getAttributeDefaultValueInternal("Text")),a==this.__baFc.textHandler.getText()||null!=a&&"string"!=typeof a||(this.__attrHandler.textAttributes.text=a,this.__baFc.textHandler.setText(a),t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Text"}),this.__processText()),this}__processText(){}getText(){return this.__baFc.textHandler.getText()}processBaObject(){if(null!=this.baObjectHandler.baObject)switch(this.baObjectHandler.baObject.DataType){case e.DataType.boolean:this.baObjectHandler.watchValueRange(e.BA.BaParameterId.ePresentValue,t=>{this.__inactiveText=null==t?void 0:t.get(0),this.__activeText=null==t?void 0:t.get(1),this.__updateBaObjectDisplay()},!0),this.baObjectHandler.tryWatchBaVariable(e.BA.BaParameterId.ePresentValue,t=>{this.__bValue=t,this.__updateBaObjectDisplay()});break;case e.DataType.number:this.baObjectHandler.baObject.tryGetBaVariable(e.BA.BaParameterId.eUnit)?this.baObjectHandler.tryWatchBaVariable(e.BA.BaParameterId.eUnit,t=>{this.__unit=e.Helper.convertUnitToString(t),this.__updateBaObjectDisplay()}):this.baObjectHandler.baObject.tryGetBaVariable(e.BA.BaParameterId.eOutputUnit)&&this.baObjectHandler.tryWatchBaVariable(e.BA.BaParameterId.eOutputUnit,t=>{this.__unit=e.Helper.convertUnitToString(t),this.__updateBaObjectDisplay()}),this.baObjectHandler.tryWatchBaVariable(e.BA.BaParameterId.ePresentValue,t=>{this.__rValue=t,this.__updateBaObjectDisplay()});break;case e.DataType.enum:this.baObjectHandler.watchValueRange(e.BA.BaParameterId.ePresentValue,t=>{this.__stateTexts=t,this.__updateBaObjectDisplay()}),this.baObjectHandler.tryWatchBaVariable(e.BA.BaParameterId.ePresentValue,t=>{this.__iValue=t,this.__updateBaObjectDisplay()});break;default:throw new Error("Invalid BaObject bound to Textblock! Only Binary, Analog and Multistate objects are allowed!")}}}i.Textblock=s}(a.Common||(a.Common={}))}(e.Controls||(e.Controls={}))}(t.BuildingAutomation||(t.BuildingAutomation={}))}(TcHmi||(TcHmi={})),TcHmi.Controls.registerEx("Textblock","TcHmi.BuildingAutomation.Controls.Common",TcHmi.BuildingAutomation.Controls.Common.Textblock);