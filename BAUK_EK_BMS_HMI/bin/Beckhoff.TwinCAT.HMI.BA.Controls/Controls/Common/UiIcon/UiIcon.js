var TcHmi,__awaiter=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))};!function(t){!function(e){!function(n){!function(n){class o extends n.Button{constructor(t,e,n){super(t,e,n),this.__displaysDataFromDesigner=null,this.__eventsDataFromDesigner=null,this.__connectionColors=null,this.__connectionColorPerSide=null}__previnit(){null==this.__baFc&&(this.__baFc=new e.Components.UiIcon(this.__id+"-ba-fc",this)),this.__element.append(this.__baFc.getElement()),super.__previnit()}__init(){super.__init()}__attach(){this.__destroyersToCallOnDetach.push(this.__baFc.eventHandler.register(e.Components.Button.ButtonEvents.onPressed,()=>this.__onPressed())),super.__attach()}__detach(){super.__detach()}destroy(){this.__keepAlive||super.destroy()}__onPressed(){null!=this.__baFc.baObjectHandler.baObject?this.__baFc.baObjectHandler.baObject.openNavigationDialog():console.warn("The BA object of the UiIcon "+this.__id+" is not set and therefore the dialog was not opened.")}setBaObject(t){return this.__baFc.baObjectHandler.setBaObject(t),this}getBaObject(){return this.__baFc.baObjectHandler.baObject}__setDisplaysDataDesigner(n){return __awaiter(this,void 0,void 0,(function*(){let o,i=t.ValueConverter.toObject(n);if(null==i&&(i=this.getAttributeDefaultValueInternal("DisplaysData")),tchmi_equal(i,this.__displaysDataFromDesigner))return this;this.__displaysDataFromDesigner=i;let r=0;if(null!=i&&i instanceof Array)for(let n=0;n<i.length;n++){let s=i[n];for(let n in s){let o=s[n];if("string"==typeof o&&o.indexOf("%pp%")>-1){let i=new t.SymbolExpression(o),r=this.getParent();null!==r&&(i=e.Helper.Mapping.getSymExpFromBoundedUcParameter(r,i),void 0!==i&&(s[n]=i.toString()))}}let a,l={position:Number(s.position),readOnly:s.readOnly,unit:s.unit,digits:s.digits,value:s.value,textAttributes:{color:e.Color.RGBAColor.fromSolidColor(s.textColor),fontWeight:s.fontWeight}};if("string"==typeof s.baObject)if(s.baObject.length<=0)a=null;else if(t.Symbol.isSymbolExpression(s.baObject)){let i,c=e.Helper.String.toServerMapping(s.baObject);r++,TCHMI_DESIGNER||(i=this.busyHandler.setBusy("Reading BaObject of display "+n,{cbOnTimeout:()=>{i&&i(),this.errorIndicator.set(e.Components.ErrorIndicator.ErrorLevel.fault)},optionalOutput:{symbolName:a}})),e.BaObjectHandler.readBaObject(c,!1).then(e=>{r--,l.baObject=e,!TCHMI_DESIGNER&&i&&i(),0==r&&(this.errorIndicator.reset(),this.__baFc.setDisplaysData(o),t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"__getDisplaysDataDesigner"}))}).catch(t=>{this.logger.log(e.Logger.Severity.error,t),i&&i(),this.setBaObject(null),this.errorIndicator.set(e.Components.ErrorIndicator.ErrorLevel.fault)})}null==o&&(o=new Map);const c="display-"+n;o.set(c,l),s.name=c}else o=null;return 0==r&&(this.__baFc.setDisplaysData(o),t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"__getDisplaysDataDesigner"})),this}))}__getDisplaysDataDesigner(){let t=this.__baFc.getDisplaysData();if(t&&this.__displaysDataFromDesigner)for(const[e,n]of t){const t=this.__displaysDataFromDesigner.find(t=>t.name===e);null!=t&&(t.value=n.value)}return this.__displaysDataFromDesigner}setDisplaysData(t){return this.__baFc.setDisplaysData(t),this}getDisplaysData(){return this.__baFc.getDisplaysData()}getDisplays(){return this.__baFc.getDisplays()}addDisplay(t,e){return this.__baFc.addDisplay(t,e)}getDisplay(t){return this.__baFc.getDisplay(t)}updateDisplay(t,e){this.__baFc.updateDisplay(t,e)}removeDisplay(t){return this.__baFc.removeDisplay(t)}setDisplayPosition(t,e){return this.__baFc.setDisplayPosition(t,e),this}__setEventsDataDesigner(n){let o,i=t.ValueConverter.toObject(n);if(null==i&&(i=this.getAttributeDefaultValueInternal("EventsData")),tchmi_equal(i,this.__eventsDataFromDesigner))return this;if(this.__eventsDataFromDesigner=i,null!=i&&i instanceof Array)for(let n=0;n<i.length;n++){let r=i[n];for(let n in r){let o=r[n];if("string"==typeof o&&o.indexOf("%pp%")>-1){let i=new t.SymbolExpression(o),s=this.getParent();null!==s&&(i=e.Helper.Mapping.getSymExpFromBoundedUcParameter(s,i),void 0!==i&&(r[n]=i.toString()))}}let s=null;null!=r.acknowledgeSymbol&&"string"==typeof r.acknowledgeSymbol&&(t.Symbol.isSymbolExpression(r.acknowledgeSymbol)?s=e.Helper.String.toServerMapping(r.acknowledgeSymbol):this.logger.log(e.Logger.Severity.warn,`Acknowledge symbol of a UiIcon ${this.__id} is not valid: ${r.acknowledgeSymbol}!`));let a={activate:null!=r.activate&&r.activate,acknowledgeMapping:s,enablePulse:r.enablePulse,eventCondition:Number(r.eventCondition),eventState:Number(r.eventIconState),eventCount:Number(r.eventCount),icon:r.icon,isAcknowledgeable:r.isAcknowledgeable};null==o&&(o=[]),o.push(a)}else o=null;return this.__baFc.setEventsData(o),t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"__getEventsDataDesigner"}),this}__getEventsDataDesigner(){return this.__eventsDataFromDesigner}setEventsData(t){return this.__baFc.setEventsData(t),this}getEventsData(){return this.__baFc.getEventsData()}setIsActive(e){let n=t.ValueConverter.toBoolean(e);return null==n&&(n=this.getAttributeDefaultValueInternal("IsActive")),n===this.__baFc.getIsActive()||(this.__baFc.setIsActive(n),this.__processIsActive(),t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"IsActive"})),this}__processIsActive(){}getIsActive(){return this.__baFc.getIsActive()}setShowDisplays(e){let n=t.ValueConverter.toBoolean(e);return null==n&&(n=this.getAttributeDefaultValueInternal("ShowDisplays")),n===this.__baFc.getShowDisplays()||(this.__baFc.setShowDisplays(n),t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowDisplays"}),this.__processShowDisplays()),this}__processShowDisplays(){}getShowDisplays(){return this.__baFc.getShowDisplays()}setConnections(e){let n=t.ValueConverter.toObject(e);null==n&&(n=this.getAttributeDefaultValueInternal("Connections"));for(let t in n)t.indexOf("Unit")>-1?delete n[t]:0===n[t]&&n[t];return tchmi_equal(n,this.__baFc.getConnections())||(this.__baFc.setConnections(n),t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Connections"})),this}getConnections(){return this.__baFc.getConnections()}setConnectionExtensions(e){let n=t.ValueConverter.toObject(e);null==n&&(n=this.getAttributeDefaultValueInternal("ConnectionExtensions"));for(let t in n)t.indexOf("Unit")>-1?delete n[t]:0===n[t]&&n[t];return tchmi_equal(n,this.__baFc.getConnectionExtensions())||(this.__baFc.setConnectionExtensions(n),t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ConnectionExtensions"})),this}getConnectionExtensions(){return this.__baFc.getConnectionExtensions()}setConnectionsWidth(e){let n=t.ValueConverter.toNumber(e);return null==n&&(n=this.getAttributeDefaultValueInternal("ConnectionsWidth")),tchmi_equal(n,this.__baFc.getConnectionsWidth())||(this.__baFc.setConnectionsWidth(n),t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ConnectionsWidth"})),this}getConnectionsWidth(){return this.__baFc.getConnectionsWidth()}setConnectionColors(n){var o;let i=t.ValueConverter.toObject(n);if(null==i&&(i=this.getAttributeDefaultValueInternal("ConnectionColors")),tchmi_equal(i,{color:null===(o=this.__baFc.getConnectionColors())||void 0===o?void 0:o.toString()}))return this;if(null==i)this.__baFc.setConnectionColors(null),this.__connectionColors=null;else if(e.Color.isSolidColor(i)){if("None"===i.color)return this;this.__baFc.setConnectionColors(e.Color.RGBAColor.fromSolidColor(i)),this.__connectionColors=e.Color.RGBAColor.fromSolidColor(i)}else e.Color.isRGBAColor(i)?(this.__baFc.setConnectionColors(i),this.__connectionColors=i):this.setConnectionColorPerSide(i);return null!=this.__connectionColorPerSide&&this.__baFc.setConnectionColors(this.__connectionColorPerSide),t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ConnectionColors"}),this}getConnectionColors(){return this.logger.log(e.Logger.Severity.warn,"Getter for attribute ConnectionColors is not implemented!"),null}setConnectionColorPerSide(n){var o;let i=t.ValueConverter.toObject(n);if(null==i)return this.__baFc.setConnectionColors(this.__connectionColors),this;if(tchmi_equal(i,{color:null===(o=this.__baFc.getConnectionColors())||void 0===o?void 0:o.toString()}))return this;for(let t in i)i[t]instanceof e.Color.RGBAColor||!e.Color.isSolidColor(i[t])||(i[t]=e.Color.RGBAColor.fromSolidColor(i[t]));return this.__baFc.setConnectionColors(i),this.__connectionColorPerSide=i,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ConnectionColorPerSide"}),this}getConnectionColorPerSide(){return this.logger.log(e.Logger.Severity.warn,"Getter for attribute ConnectionColorPerSide is not implemented!"),null}setShowTag(e){let n=t.ValueConverter.toNumber(e);return null==n&&(n=this.getAttributeDefaultValueInternal("ShowTag")),n===this.__baFc.getShowTag()||(this.__baFc.setShowTag(n),t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowTag"})),this}getShowTag(){return this.__baFc.getShowTag()}get baObjectHandler(){return this.__baFc.baObjectHandler}processBaObject(){}}n.UiIcon=o}(n.Common||(n.Common={}))}(e.Controls||(e.Controls={}))}(t.BuildingAutomation||(t.BuildingAutomation={}))}(TcHmi||(TcHmi={})),TcHmi.Controls.registerEx("UiIcon","TcHmi.BuildingAutomation.Controls.Common",TcHmi.BuildingAutomation.Controls.Common.UiIcon);