var TcHmi,__awaiter=this&&this.__awaiter||function(t,e,i,a){return new(i||(i=Promise))((function(n,s){function l(t){try{r(a.next(t))}catch(t){s(t)}}function _(t){try{r(a.throw(t))}catch(t){s(t)}}function r(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(l,_)}r((a=a.apply(t,e||[])).next())}))};!function(t){!function(e){!function(i){!function(a){class n extends i.System.BaseControl{constructor(t,i,a){super(t,i,a),this.__loadBaChildren=!0,this.__data=null,this.__xAxisExtension=null,this.__title=null,this.__showHeader=null,this.__contentWindow=new e.Components.ContentWindow(this.__id+"-content-window",this),this.__contentContainer=this.__contentWindow.getContentContainer(),this.__setpointsContainer=$("<div>").addClass("setpoint-container"),this.__parameterListContainer=$("<div>").addClass("parameter-list-container"),this.__parameterList=new e.Navigation.ParameterList(this.__id+".parameter-list",this),this.__contextMenu=this.__contentWindow.addMenu(),this.__scales=[],this.__lineChartYAxis=[],this.__lineGraphDescriptions=[],this.__lineChartData=[],this.__saveButtonPressedHandler=()=>{this.__contextMenu.close(),this.eventHandler.raise(n.ScaleEvents.onSave)},this.__resetButtonPressedHandler=()=>{this.__contextMenu.close(),this.eventHandler.raise(n.ScaleEvents.onReset)},this.__limitValueChangedHandler=(t,i)=>{var a,n,s,l;if(null===this.__data)return;let _=t.getValue();if("number"==typeof _){let r=t.getId(),o=this.__data[i];if(r.indexOf("y-max")>-1){let t=this.__normalizeAxisTicks(this.__lineChartYAxis[i].mainTickMinValue,_+o.YAxisExtension);if(null!=t&&(this.__lineChartYAxis[i].mainTickMinValue=t.min,this.__lineChartYAxis[i].mainTickMaxValue=t.max),o.YMax=_,null!=this.__scales){let t=this.__scales[i];null===(a=t.LimitInputs)||void 0===a||a.YMax.setValue(_),null===(n=t.LimitInputs)||void 0===n||n.YMin.setMaxValue(_);for(let e=0;e<t.Setpoints.length;e++)t.Setpoints[e].setpoint.setYAxisMax(this.__lineChartYAxis[i].mainTickMaxValue),t.Setpoints[e].setpoint.setYAxisMin(this.__lineChartYAxis[i].mainTickMinValue),t.Setpoints[e].setpoint.setYMax(_);if(null!=this.baObjectHandler.baObject){if(!this.baObjectHandler.baObject.getIsValid())return void e.Logger.log(e.Logger.Severity.warn,this.baObjectHandler.baObject.isNotValidText);switch(this.baObjectHandler.baObject.SubjectInfo.Identifier){case e.BA.SubjectInfos.HtgCrv:case e.BA.SubjectInfos.HeatgCrv:break;case e.BA.SubjectInfos.SpTRm:case e.BA.SubjectInfos.SpRoomTemp:t.Setpoints[3].setpoint.setValue({x:t.Setpoints[3].setpoint.getValue().x,y:_})}}}}else if(r.indexOf("y-min")>-1){let t=this.__normalizeAxisTicks(_-o.YAxisExtension,this.__lineChartYAxis[i].mainTickMaxValue);if(null!=t&&(this.__lineChartYAxis[i].mainTickMinValue=t.min,this.__lineChartYAxis[i].mainTickMaxValue=t.max),o.YMin=_,null!=this.__scales){let t=this.__scales[i];null===(s=t.LimitInputs)||void 0===s||s.YMin.setValue(_),null===(l=t.LimitInputs)||void 0===l||l.YMax.setMinValue(_);for(let e=0;e<t.Setpoints.length;e++)t.Setpoints[e].setpoint.setYAxisMin(this.__lineChartYAxis[i].mainTickMinValue),t.Setpoints[e].setpoint.setYAxisMax(this.__lineChartYAxis[i].mainTickMaxValue),t.Setpoints[e].setpoint.setYMin(_);if(null!=this.baObjectHandler.baObject){if(!this.baObjectHandler.baObject.getIsValid())return void e.Logger.log(e.Logger.Severity.warn,this.baObjectHandler.baObject.isNotValidText);switch(this.baObjectHandler.baObject.SubjectInfo.Identifier){case e.BA.SubjectInfos.HtgCrv:case e.BA.SubjectInfos.HeatgCrv:break;case e.BA.SubjectInfos.SpTRm:case e.BA.SubjectInfos.SpRoomTemp:t.Setpoints[1].setpoint.setValue({x:t.Setpoints[1].setpoint.getValue().x,y:_}),t.Setpoints[2].setpoint.setValue({x:t.Setpoints[2].setpoint.getValue().x,y:_})}}}}else console.log(`Value of unknown limit input has changed in ${this.__id}!`);this.__updateLineChart()}}}__previnit(){super.__previnit(),this.baObjectHandler=new e.BaObjectHandler(this),this.resizeHandler=new e.Components.ResizeHandler(this),this.__element.append(this.__contentWindow.getElement()),this.__contextMenu.addRowEntry({controlsHorizontalAlignment:"Right",controls:[{type:e.Components.ComponentType.Button,callback:this.__saveButtonPressedHandler,settings:{textAttributes:{text:"Save"},layout:{maxWidth:100}}},{type:e.Components.ComponentType.Button,callback:this.__resetButtonPressedHandler,settings:{textAttributes:{text:"Reset"},layout:{maxWidth:100}}}]}),this.__lineChart=t.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiLineChart",this.__id+"-line-chart",{"data-tchmi-show-x-axis":!0,"data-tchmi-show-x-axis-name":!0,"data-tchmi-x-axis-name":"Outside temperature","data-tchmi-x-axis-unit":"Â°C","data-tchmi-x-axis-decimal-places":2,"data-tchmi-x-main-tick-min-value":0,"data-tchmi-x-main-tick-max-value":100,"data-tchmi-x-main-tick-steps":11,"data-tchmi-y-main-tick-steps":11,"data-tchmi-graph-background-color":{color:"rgb(255,255,255)"},"data-tchmi-show-grid":!0,"data-tchmi-subgrid-show-horizontal-lines":!0,"data-tchmi-subgrid-show-vertical-lines":!0,"data-tchmi-show-x-sub-ticks":!0,"data-tchmi-show-y-sub-ticks":!0},this),null!=this.__lineChart&&(this.__lineChart.getElement().addClass("line-chart"),this.__lineChart.setXAxisDecimalPlaces(0),this.__contentContainer.append(this.__lineChart.getElement()),this.__lineChart.getElement().append(this.__setpointsContainer)),this.__contentContainer.append(this.__parameterListContainer),this.__parameterList.getElement().addClass("parameter-list"),this.__parameterListContainer.append(this.__parameterList.getElement())}__init(){super.__init()}__attach(){if(super.__attach(),this.__destroyersToCallOnDetach.push(this.eventHandler.register(n.ScaleEvents.onSave,()=>{var t,i,a,n,s,l,_,r,o,h,u,d,c,x,p,M,m,y,v,S,b,g,f,C,Y,A,V,B,w,H,O,j,D,E;if(null==this.__data)return;let P=this.__data[0];if(null==P)return;let T,I=this.__baFc.getReadOnly();if(null!=this.baObjectHandler.baObject&&!I&&this.baObjectHandler.baObject instanceof e.BA.BaView){if(!this.baObjectHandler.baObject.getIsValid())return void e.Logger.log(e.Logger.Severity.warn,this.baObjectHandler.baObject.isNotValidText);switch(this.baObjectHandler.baObject.SubjectInfo.Identifier){case e.BA.SubjectInfos.HtgCrv:case e.BA.SubjectInfos.HeatgCrv:T=this.baObjectHandler.baObject.Children,null===(i=null===(t=T.get("Y1"))||void 0===t?void 0:t.tryGetBaVariable(e.BA.BaParameterId.ePresentValue))||void 0===i||i.write(P.ScaleSetpoints[3].y),null===(n=null===(a=T.get("X1"))||void 0===a?void 0:a.tryGetBaVariable(e.BA.BaParameterId.ePresentValue))||void 0===n||n.write(P.ScaleSetpoints[3].x),null===(l=null===(s=T.get("Y2"))||void 0===s?void 0:s.tryGetBaVariable(e.BA.BaParameterId.ePresentValue))||void 0===l||l.write(P.ScaleSetpoints[2].y),null===(r=null===(_=T.get("X2"))||void 0===_?void 0:_.tryGetBaVariable(e.BA.BaParameterId.ePresentValue))||void 0===r||r.write(P.ScaleSetpoints[2].x),null===(h=null===(o=T.get("Y3"))||void 0===o?void 0:o.tryGetBaVariable(e.BA.BaParameterId.ePresentValue))||void 0===h||h.write(P.ScaleSetpoints[1].y),null===(d=null===(u=T.get("X3"))||void 0===u?void 0:u.tryGetBaVariable(e.BA.BaParameterId.ePresentValue))||void 0===d||d.write(P.ScaleSetpoints[1].x),null===(x=null===(c=T.get("Y4"))||void 0===c?void 0:c.tryGetBaVariable(e.BA.BaParameterId.ePresentValue))||void 0===x||x.write(P.ScaleSetpoints[0].y),null===(M=null===(p=T.get("X4"))||void 0===p?void 0:p.tryGetBaVariable(e.BA.BaParameterId.ePresentValue))||void 0===M||M.write(P.ScaleSetpoints[0].x),null===(y=null===(m=T.get("YMax"))||void 0===m?void 0:m.tryGetBaVariable(e.BA.BaParameterId.ePresentValue))||void 0===y||y.write(P.YMax),null===(S=null===(v=T.get("YMin"))||void 0===v?void 0:v.tryGetBaVariable(e.BA.BaParameterId.ePresentValue))||void 0===S||S.write(P.YMin);break;case e.BA.SubjectInfos.SpTRm:case e.BA.SubjectInfos.SpRoomTemp:T=this.baObjectHandler.baObject.Children,null===(g=null===(b=T.get("Y1"))||void 0===b?void 0:b.tryGetBaVariable(e.BA.BaParameterId.ePresentValue))||void 0===g||g.write(P.ScaleSetpoints[0].y),null===(C=null===(f=T.get("Y2_3"))||void 0===f?void 0:f.tryGetBaVariable(e.BA.BaParameterId.ePresentValue))||void 0===C||C.write(P.ScaleSetpoints[1].y),null===(A=null===(Y=T.get("Y4"))||void 0===Y?void 0:Y.tryGetBaVariable(e.BA.BaParameterId.ePresentValue))||void 0===A||A.write(P.ScaleSetpoints[3].y),null===(B=null===(V=T.get("X1"))||void 0===V?void 0:V.tryGetBaVariable(e.BA.BaParameterId.ePresentValue))||void 0===B||B.write(P.ScaleSetpoints[0].x),null===(H=null===(w=T.get("X2"))||void 0===w?void 0:w.tryGetBaVariable(e.BA.BaParameterId.ePresentValue))||void 0===H||H.write(P.ScaleSetpoints[1].x),null===(j=null===(O=T.get("X3"))||void 0===O?void 0:O.tryGetBaVariable(e.BA.BaParameterId.ePresentValue))||void 0===j||j.write(P.ScaleSetpoints[2].x),null===(E=null===(D=T.get("X4"))||void 0===D?void 0:D.tryGetBaVariable(e.BA.BaParameterId.ePresentValue))||void 0===E||E.write(P.ScaleSetpoints[3].x)}}})),this.__destroyersToCallOnDetach.push(this.eventHandler.register(n.ScaleEvents.onReset,()=>{this.processBaObject()})),this.__lineChart){let e=t.EventProvider.register(this.__lineChart.getId()+".onAttached",()=>{e(),this.__updateLineChart()})}}__detach(){super.__detach()}destroy(){if(!this.__keepAlive){for(let t=0;t<this.__scales.length;t++)for(let e=0;e<this.__scales[t].Setpoints.length;e++){let i=this.__scales[t].Setpoints[e].destroyOnChanged;null!=i&&i()}this.childrenHandler.getChildren().forEach(t=>t.destroy()),this.resizeHandler.destroy(),super.destroy()}}__onSetPointValueChanged(i,a){var s,l;if(null===this.__data)return;let _=a.getId(),r=a.getValue();if(null===r)return;let o=_.replace(this.__id+"-scale-setpoint-",""),h=Number(o.slice(o.indexOf("-")+1));o=Number(o.slice(0,o.indexOf("-"))),this.__data[o].ScaleSetpoints[h]=JSON.parse(JSON.stringify(r));let u=this.__data[o];switch(u.Behavior){case n.Behavior.onlyDecreasing:0===h?a.setYMax(u.YMax).setYMin(u.ScaleSetpoints[h+1].y).setXMax(u.ScaleSetpoints[h+1].x):h===u.ScaleSetpoints.length-1?a.setYMax(u.ScaleSetpoints[h-1].y).setYMin(u.YMin).setXMin(u.ScaleSetpoints[h-1].x):a.setYMax(u.ScaleSetpoints[h-1].y).setYMin(u.ScaleSetpoints[h+1].y).setXMin(u.ScaleSetpoints[h-1].x).setXMax(u.ScaleSetpoints[h+1].x);break;case n.Behavior.onlyIncreasing:0===h?a.setYMin(u.YMin).setYMax(u.ScaleSetpoints[h+1].y).setXMax(u.ScaleSetpoints[h+1].x):h===u.ScaleSetpoints.length-1?a.setYMin(u.ScaleSetpoints[h-1].y).setYMax(u.YMax).setXMin(u.ScaleSetpoints[h-1].x):a.setYMax(u.ScaleSetpoints[h+1].y).setYMin(u.ScaleSetpoints[h-1].y).setXMin(u.ScaleSetpoints[h-1].x).setXMax(u.ScaleSetpoints[h+1].x)}if(null!=this.baObjectHandler.baObject){if(!this.baObjectHandler.baObject.getIsValid())return void e.Logger.log(e.Logger.Severity.warn,this.baObjectHandler.baObject.isNotValidText);switch(this.baObjectHandler.baObject.SubjectInfo.Identifier){case e.BA.SubjectInfos.HtgCrv:case e.BA.SubjectInfos.HeatgCrv:break;case e.BA.SubjectInfos.SpTRm:case e.BA.SubjectInfos.SpRoomTemp:if(0===o&&1===h){let t=null===(s=this.__scales[o].Setpoints[h+1])||void 0===s?void 0:s.setpoint,e=null==t?void 0:t.getValue();null!=e&&(t.setValue({x:e.x,y:r.y}),this.__data[o].ScaleSetpoints[h+1].y=r.y)}else if(0===o&&2===h){let t=null===(l=this.__scales[o].Setpoints[h-1])||void 0===l?void 0:l.setpoint,e=null==t?void 0:t.getValue();null!=e&&(t.setValue({x:e.x,y:r.y}),this.__data[o].ScaleSetpoints[h-1].y=r.y)}}}t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Data"}),this.__updateLineChart(),this.onResized()}onResized(){let t=this.__setpointsContainer.outerHeight(),e=this.__setpointsContainer.outerWidth();if(!(null==t||null==e||t<=0||e<=0)){for(let i=0;i<this.__scales.length;i++)for(let a=0;a<this.__scales[i].Setpoints.length;a++)this.__scales[i].Setpoints[a].setpoint.setRange({Height:t,Width:e});for(let t=0;t<this.__lineChartYAxis.length;t++)this.__updateLimitIdentifiers(t)}}__normalizeAxisTicks(t,e){let i=0;if(null==t||null==e)return null;for(;(e-t)%10!=0;)i%2==0?t--:e++,i++;return{min:t,max:e}}__updateLineChart(){var t;if(this.__isAttached&&(null===(t=this.__lineChart)||void 0===t?void 0:t.getIsAttached())&&null!=this.__lineChart&&null!=this.__dataXMin&&null!=this.__dataXMax&&null!=this.__lineChartYAxis&&null!=this.__lineGraphDescriptions&&null!=this.__data&&this.__lineChartYAxis.length===this.__data.length&&this.__lineGraphDescriptions.length===this.__data.length){for(let t=0;t<this.__lineChartYAxis.length;t++){let e=this.__lineChartYAxis[t];if(null!=e.mainTickMinValue&&null!=e.mainTickMaxValue){let t=this.__normalizeAxisTicks(e.mainTickMinValue,e.mainTickMaxValue);null!=t&&(e.mainTickMinValue=t.min,e.mainTickMaxValue=t.max)}}this.__lineChart.setYAxis(this.__lineChartYAxis),this.__lineChart.setLineGraphDescriptions(this.__lineGraphDescriptions),this.__lineChartData=[];let t=this.__dataXMin-(null!=this.__xAxisExtension?this.__xAxisExtension:0),e=this.__dataXMax+(null!=this.__xAxisExtension?this.__xAxisExtension:0),i=this.__normalizeAxisTicks(t,e);if(null!=i&&(t=i.min,e=i.max),this.__lineChart.setXMainTickMinValue(t),this.__lineChart.setXMainTickMaxValue(e),null==t||null==e)return;for(let i=0;i<this.__data.length;i++){let a=this.__data[i];if(null==a.YMax||null==a.YMin)return;this.__lineChartData.push(JSON.parse(JSON.stringify(a.ScaleSetpoints)));let s=a.ScaleSetpoints[1].y,l=a.ScaleSetpoints[0].y,_=a.ScaleSetpoints[1].x,r=a.ScaleSetpoints[0].x,o=(l-s)/(r-_),h=a.ScaleSetpoints.length,u=a.ScaleSetpoints[h-2].y,d=a.ScaleSetpoints[h-1].y,c=a.ScaleSetpoints[h-2].x,x=a.ScaleSetpoints[h-1].x,p=(d-u)/(x-c),M=this.__lineChartYAxis[i].mainTickMinValue,m=this.__lineChartYAxis[i].mainTickMaxValue;if(null==M||null==m)return;switch(a.Ending){case n.Ending.direct:break;case n.Ending.infinity:let h;o===-1/0?this.__lineChartData[i].unshift({x:_,y:M}):o===1/0?this.__lineChartData[i].unshift({x:_,y:m}):_>r?(h=o*(t-_)+s,this.__lineChartData[i].unshift({x:t,y:h})):(h=o*(e-_)+s,this.__lineChartData[i].unshift({x:e,y:h})),p===-1/0?this.__lineChartData[i].push({x:c,y:M}):p===1/0?this.__lineChartData[i].push({x:c,y:m}):c<x?(h=p*(e-c)+u,this.__lineChartData[i].push({x:e,y:h})):(h=p*(t-c)+u,this.__lineChartData[i].push({x:t,y:h}));break;case n.Ending.limits:switch(a.Behavior){case n.Behavior.onlyIncreasing:if(isFinite(o)){let e=o*(t-_)+s;if(e>=a.YMin)this.__lineChartData[i].unshift({x:t,y:e});else{let e=(a.YMin+o*_-s)/o;this.__lineChartData[i].unshift({x:e,y:a.YMin}),this.__lineChartData[i].unshift({x:t,y:a.YMin})}}else this.__lineChartData[i].unshift({x:_,y:a.YMin}),this.__lineChartData[i].unshift({x:t,y:a.YMin});if(isFinite(p)){let t=p*(e-c)+u;if(t<=a.YMax)this.__lineChartData[i].push({x:e,y:t});else{let t=(a.YMax+p*c-u)/p;this.__lineChartData[i].push({x:t,y:a.YMax}),this.__lineChartData[i].push({x:e,y:a.YMax})}}else this.__lineChartData[i].push({x:c,y:a.YMax}),this.__lineChartData[i].push({x:e,y:a.YMax});break;case n.Behavior.onlyDecreasing:if(isFinite(o)){let e=o*(t-_)+s;if(e<=a.YMax)this.__lineChartData[i].unshift({x:t,y:e});else{let e=(a.YMax+o*_-s)/o;this.__lineChartData[i].unshift({x:e,y:a.YMax}),this.__lineChartData[i].unshift({x:t,y:a.YMax})}}else this.__lineChartData[i].unshift({x:_,y:a.YMax}),this.__lineChartData[i].unshift({x:t,y:a.YMax});if(isFinite(p)){let t=p*(e-c)+u;if(t>=a.YMin)this.__lineChartData[i].push({x:e,y:t});else{let t=(a.YMin+p*c-u)/p;this.__lineChartData[i].push({x:t,y:a.YMin}),this.__lineChartData[i].push({x:e,y:a.YMin})}}else this.__lineChartData[i].push({x:c,y:a.YMin}),this.__lineChartData[i].push({x:e,y:a.YMin});break;case n.Behavior.any:let l;if(o===1/0)this.__lineChartData[i].unshift({x:_,y:a.YMax}),this.__lineChartData[i].unshift({x:t,y:a.YMax});else if(o===-1/0)this.__lineChartData[i].unshift({x:_,y:a.YMin}),this.__lineChartData[i].unshift({x:t,y:a.YMin});else if(o<0){if(_>r)if(l=o*(t-_)+s,l<=a.YMax)this.__lineChartData[i].unshift({x:t,y:l});else{let e=(a.YMax+o*_-s)/o;this.__lineChartData[i].unshift({x:e,y:a.YMax}),this.__lineChartData[i].unshift({x:t,y:a.YMax})}}else if(_>r){let e=o*(t-_)+s;if(e>=a.YMin)this.__lineChartData[i].unshift({x:t,y:e});else{let e=(a.YMin+o*_-s)/o;this.__lineChartData[i].unshift({x:e,y:a.YMin}),this.__lineChartData[i].unshift({x:t,y:a.YMin})}}if(p===1/0)this.__lineChartData[i].push({x:c,y:a.YMax}),this.__lineChartData[i].push({x:e,y:a.YMax});else if(p===-1/0)this.__lineChartData[i].push({x:c,y:a.YMin}),this.__lineChartData[i].push({x:e,y:a.YMin});else if(p<0){if(c<x)if(l=p*(e-c)+u,l>=a.YMin)this.__lineChartData[i].push({x:e,y:l});else{let t=(a.YMin+p*c-u)/p;this.__lineChartData[i].push({x:t,y:a.YMin}),this.__lineChartData[i].push({x:e,y:a.YMin})}}else if(c<x)if(l=p*(e-c)+u,l<=a.YMax)this.__lineChartData[i].push({x:e,y:l});else{let t=(a.YMax+p*c-u)/p;this.__lineChartData[i].push({x:t,y:a.YMax}),this.__lineChartData[i].push({x:e,y:a.YMax})}}break;case n.Ending.cutOff:this.__lineChartData[i].unshift({x:t,y:l}),this.__lineChartData[i].push({x:e,y:d})}}this.__lineChart.setLineGraphData(this.__lineChartData),this.__updateSetpointContainer()}}__updateSetpointContainer(){let t=15;for(let e=0;e<this.__lineChartYAxis.length;e++){t+=73;let i=this.__lineChartYAxis[e].mainTickMaxValue,a=this.__lineChartYAxis[e].mainTickMinValue;null!=a&&null!=i&&(i<=-100||a<=-100?t+=11:i>=100||a>=100?t+=6:(i<0||a<0)&&(t+=4)),this.__updateLimitIdentifiers(e)}this.__setpointsContainer.css({left:t})}__updateLimitIdentifiers(t){if(null==this.__data)return;let e=this.__data[t].Ending,i=this.__id+"-min-identifier-"+t,a=this.__setpointsContainer.find("#"+i);null==a[0]&&(e!==n.Ending.infinity?(a=$("<div>").addClass("scale-limit-identifier").attr("id",i),this.__setpointsContainer.append(a)):a.detach());let s=this.__setpointsContainer.find("#"+this.__id+"-max-identifier-"+t);if(null==s[0]&&(e!==n.Ending.infinity?(s=$("<div>").addClass("scale-limit-identifier").attr("id",this.__id+"-max-identifier-"+t),this.__setpointsContainer.append(s)):s.detach()),e==n.Ending.infinity)return;let l=this.__lineChartYAxis[t].mainTickMinValue,_=this.__lineChartYAxis[t].mainTickMaxValue,r=this.__setpointsContainer.outerHeight(),o=this.__lineChartYAxis[t].axisColor,h=this.__data[t].YMin,u=this.__data[t].YMax;null!=r&&null!=_&&null!=l&&null!=h&&null!=u&&null!=o&&(a.css({bottom:r/(_-l)*(h-l)-2,"border-color":o.color}),s.css({bottom:r/(_-l)*(u-l)-1,"border-color":o.color}))}setBaObject(t){return this.baObjectHandler.setBaObject(t),this}getBaObject(){return this.baObjectHandler.baObject}setData(t){return null===t||tchmi_equal(t,this.__data)||(this.__data=t,this.__processData()),this}__processData(){var i,a,s,l,_,r,o,h;if(null==this.__data)return;for(let u=0;u<this.__data.length;u++){let d=this.__data[u];null==this.__scales[u]&&(this.__scales[u]={Setpoints:[]});let c,x,p=this.__scales[u];"string"==typeof d.Behavior&&(d.Behavior=Number(d.Behavior)),"string"==typeof d.Ending&&(d.Ending=Number(d.Ending));for(let t=0;t<d.ScaleSetpoints.length;t++){let e=d.ScaleSetpoints[t],s=null===(i=p.Setpoints[t])||void 0===i?void 0:i.setpoint,l=null===(a=p.Setpoints[t])||void 0===a?void 0:a.destroyOnChanged;!1===d.ReadOnly?(null==s&&(s=new n.Setpoint(this.__id+"-scale-setpoint-"+u+"-"+t,this),l=s.eventHandler.register(n.Setpoint.SetpointEvents.onSetpointValueChanged,(t,e)=>this.__onSetPointValueChanged(t,e)),this.__setpointsContainer.append(s.getElement()),p.Setpoints.push({setpoint:s,destroyOnChanged:l})),null!=s&&s.setValue(e).setSnapPeriode(d.SnapPeriode).setAllowHorizontalMovement(d.AllowHorizontalMovement).setAllowVerticalMovement(d.AllowVerticalMovement)):(null!=s&&(s.getElement().detach(),s.destroy()),null!=l&&l()),this.__dataXMin=Math.min(null!=this.__dataXMin?this.__dataXMin:e.x,e.x),this.__dataXMax=Math.max(null!=this.__dataXMax?this.__dataXMax:e.x,e.x),c=Math.min(null!=c?c:e.y,e.y),x=Math.max(null!=x?x:e.y,e.y)}!0===d.ReadOnly&&(p.Setpoints=[]),null==!d.YMax&&(d.YMax=x),null==d.YMin&&(d.YMin=c),null!=d.YMax&&null!=d.YMin&&d.YMax<=d.YMin&&console.error(`YMax should be bigger than YMin in data of ${this.__id}!`),null==d.Title&&(d.Title="Scale "+u),null==d.YAxisExtension&&(d.YAxisExtension=0);let M={color:e.Color.getPastelColor(u)};null==this.__lineChartYAxis[u]&&(this.__lineChartYAxis.push({id:u,position:0,decimalPlaces:2,showAxis:!0,showLabels:!0,showAxisName:!0,axisNameFontSize:15,axisNameFontSizeUnit:"px",axisNameFontWeight:"Bold",axisNameFontColor:null===(s=M.color)||void 0===s?void 0:s.toSolidColor(),axisColor:null===(l=M.color)||void 0===l?void 0:l.toSolidColor(),labelFontColor:null===(_=M.color)||void 0===_?void 0:_.toSolidColor(),unit:d.Unit,logarithmicScale:!1,axisLabeling:t.Controls.Beckhoff.TcHmiLineChart.AxisLabeling.Auto}),this.__lineGraphDescriptions.push({yAxisId:u,lineColor:null===(r=M.color)||void 0===r?void 0:r.toSolidColor(),lineWidth:1,pointDot:!1,pointDotFillColor:null===(o=M.color)||void 0===o?void 0:o.toSolidColor(),pointDotRadius:3,pointDotStrokeColor:null===(h=M.color)||void 0===h?void 0:h.toSolidColor(),pointDotStrokeWidth:1}));let m=null!=d.YMin?d.YMin-d.YAxisExtension:0,y=null!=d.YMax?d.YMax+d.YAxisExtension:0,v=this.__normalizeAxisTicks(m,y);null!=v&&(this.__lineChartYAxis[u].mainTickMinValue=v.min,this.__lineChartYAxis[u].mainTickMaxValue=v.max),this.__lineChartYAxis[u].axisName=d.Title;for(let t=0;t<p.Setpoints.length;t++){let e=p.Setpoints[t].setpoint;switch(e.setYAxisMin(this.__lineChartYAxis[u].mainTickMinValue).setYAxisMax(this.__lineChartYAxis[u].mainTickMaxValue),d.Behavior){case n.Behavior.any:e.setYMax(d.YMax).setYMin(d.YMin);break;case n.Behavior.onlyDecreasing:0===t?e.setYMax(d.YMax).setYMin(d.ScaleSetpoints[t+1].y).setXMax(d.ScaleSetpoints[t+1].x):t===p.Setpoints.length-1?e.setYMax(d.ScaleSetpoints[t-1].y).setYMin(d.YMin).setXMin(d.ScaleSetpoints[t-1].x):e.setYMax(d.ScaleSetpoints[t-1].y).setYMin(d.ScaleSetpoints[t+1].y).setXMin(d.ScaleSetpoints[t-1].x).setXMax(d.ScaleSetpoints[t+1].x);break;case n.Behavior.onlyIncreasing:0===t?e.setYMin(d.YMin).setYMax(d.ScaleSetpoints[t+1].y).setXMax(d.ScaleSetpoints[t+1].x):t===p.Setpoints.length-1?e.setYMin(d.ScaleSetpoints[t-1].y).setYMax(d.YMax).setXMin(d.ScaleSetpoints[t-1].x):e.setYMax(d.ScaleSetpoints[t+1].y).setYMin(d.ScaleSetpoints[t-1].y).setXMin(d.ScaleSetpoints[t-1].x).setXMax(d.ScaleSetpoints[t+1].x)}}let S=p.LimitInputs;if(d.Ending!==n.Ending.infinity&&null==S){let t=t=>{let i=t.eventHandler.register(e.Navigation.ParameterList.ParameterListEntry.ParameterListEntryEvents.onValueChanged,(t,e)=>{this.__limitValueChangedHandler(e,u)});t.eventHandler.register(e.Components.BaseNode.BaseNodeEvents.onDestroyed,t=>{i()})};S={YMax:this.__parameterList.addEntry(this.__id+"-scale-"+u+"-y-max-limit-input",{DataType:e.DataType.number,Title:"Y max "+u,Unit:d.Unit,MinValue:d.YMin,ReadOnly:d.ReadOnly,cbOnCreated:[t]}),YMin:this.__parameterList.addEntry(this.__id+"-scale-"+u+"-y-min-limit-input",{DataType:e.DataType.number,Title:"Y min "+u,Unit:d.Unit,MaxValue:d.YMax,ReadOnly:d.ReadOnly,cbOnCreated:[t]})},S.YMax.backgroundStyler.setColor(M.color),S.YMin.backgroundStyler.setColor(M.color),p.LimitInputs=S}null!=S&&(d.Ending!==n.Ending.infinity?(S.YMax.setValue(d.YMax),S.YMax.setReadOnly(d.ReadOnly),S.YMin.setValue(d.YMin),S.YMin.setReadOnly(d.ReadOnly)):(this.__parameterList.removeEntry(S.YMin.getId()),this.__parameterList.removeEntry(S.YMax.getId())))}let u=this.__normalizeAxisTicks(this.__dataXMin,this.__dataXMax);if(null!=u&&(this.__dataXMin=u.min,this.__dataXMax=u.max),this.__updateLineChart(),null!=this.__dataXMin&&null!=this.__dataXMax)for(let t=0;t<this.__scales.length;t++)for(let e=0;e<this.__scales[t].Setpoints.length;e++)this.__scales[t].Setpoints[e].setpoint.setXAxisMin(this.__dataXMin-(null!=this.__xAxisExtension?this.__xAxisExtension:0)),this.__scales[t].Setpoints[e].setpoint.setXAxisMax(this.__dataXMax+(null!=this.__xAxisExtension?this.__xAxisExtension:0));this.onResized()}getData(){return this.__data}setXAxisExtension(e){let i=t.ValueConverter.toNumber(e);return null==i&&(i=this.getAttributeDefaultValueInternal("XAxisExtension")),i===this.__xAxisExtension||(this.__xAxisExtension=i,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XAxisExtension"}),this.__processXAxisExtension()),this}__processXAxisExtension(){null!==this.__xAxisExtension&&this.__processData()}getXAxisExtension(){return this.__xAxisExtension}setTitle(e){let i=t.ValueConverter.toString(e);return null==i&&(i=this.getAttributeDefaultValueInternal("Title")),i===this.__title||(this.__title=i,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Title"}),this.__processTitle()),this}__processTitle(){this.__contentWindow.setHeadlineText(this.__title)}getTitle(){return this.__title}setShowHeader(e){let i=t.ValueConverter.toBoolean(e);return null==i&&(i=this.getAttributeDefaultValueInternal("ShowHeader")),i===this.__showHeader||(this.__showHeader=i,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowHeader"}),this.__processShowHeader()),this}__processShowHeader(){this.__contentWindow.setShowHeader(this.__showHeader)}getShowHeader(){return this.__showHeader}processBaObject(){var t,i,a,s;if(null==this.baObjectHandler.baObject)return;if(!(this.baObjectHandler.baObject instanceof e.BA.BaView))return void console.warn("Passed object in Scale is not a BaView",this.baObjectHandler.baObject);let l,_,r,o=!0,h={ScaleSetpoints:[],YMax:0,YMin:0,Title:"",Behavior:n.Behavior.onlyDecreasing,Ending:n.Ending.limits,SnapPeriode:1,AllowVerticalMovement:!0,AllowHorizontalMovement:!0,YAxisExtension:10,ReadOnly:!0};if(this.baObjectHandler.tryWatchBaVariable(e.BA.BaParameterId.eDescription,t=>{this.setTitle(t)}),this.setXAxisExtension(10),null==this.__data&&(this.__data=[],this.__data[0]=JSON.parse(JSON.stringify(h))),this.baObjectHandler.baObject instanceof e.BA.BaView){if(!this.baObjectHandler.baObject.getIsValid())return void e.Logger.log(e.Logger.Severity.warn,this.baObjectHandler.baObject.isNotValidText);switch(this.baObjectHandler.baObject.SubjectInfo.Identifier){case e.BA.SubjectInfos.HtgCrv:case e.BA.SubjectInfos.HeatgCrv:_=["X1","X2","X3","X4","Y1","Y2","Y3","Y4","YMin","YMax","Y"],l=new Map;for(let t=0;t<_.length;t++){let e=this.baObjectHandler.baObject.Children.get(_[t]);e?l.set(_[t],e):console.warn(`Passed BaObject does not contain a child with subject identifier ${_[t]}!`,{requiredChildren:_,baObj:this.baObjectHandler.baObject})}for(let[t,i]of l){let a=t[0].toLowerCase();if("x"!==a&&"y"!==a)continue;if("Y"===t||"YMin"===t||"YMax"===t)continue;let n=Number(t.toLowerCase().replace(a,""));isNaN(n)||(n=-(n-4),this.baObjectHandler.tryWatchChildrenBaVariable(i,e.BA.BaParameterId.ePresentValue,t=>{null!=t&&("x"!==a&&"y"!==a||null!=this.__data&&(null==this.__data[0].ScaleSetpoints[n]&&(this.__data[0].ScaleSetpoints[n]={x:0,y:0}),this.__data[0].ScaleSetpoints[n][a]=t,o||this.__processData()))}))}r=null===(i=null===(t=l.get("YMin"))||void 0===t?void 0:t.tryGetBaVariable(e.BA.BaParameterId.ePresentValue))||void 0===i?void 0:i.Access.Write,null!=r&&e.Server.UserManagement.checkAccess(r)?this.__data[0].ReadOnly=!1:this.__data[0].ReadOnly=!0,this.baObjectHandler.tryWatchChildrenBaVariable(l.get("YMin"),e.BA.BaParameterId.ePresentValue,t=>{if(null!=t&&null!=this.__data){for(let e=0;e<this.__data.length;e++)this.__data[e].YMin=t;o||this.__processData()}}),this.baObjectHandler.tryWatchChildrenBaVariable(l.get("YMax"),e.BA.BaParameterId.ePresentValue,t=>{if(null!=t&&null!=this.__data){for(let e=0;e<this.__data.length;e++)this.__data[e].YMax=t;o||this.__processData()}}),this.baObjectHandler.tryWatchChildrenBaVariable(l.get("Y"),e.BA.BaParameterId.eUnit,t=>{if(null==t||null==this.__data)return;let i=e.Functions.ConvertUnitToString(t);if(null!=i){for(let t=0;t<this.__data.length;t++)this.__data[t].Unit=i;o||this.__processData()}}),this.__processData(),o=!1;break;case e.BA.SubjectInfos.SpTRm:case e.BA.SubjectInfos.SpRoomTemp:_=["X1","X2","X3","X4","Y1","Y2_3","Y4","Sp"],l=new Map;for(let t=0;t<_.length;t++){let e=this.baObjectHandler.baObject.Children.get(_[t]);e?l.set(_[t],e):console.warn(`Passed BaObject does not contain a child with subject identifier ${_[t]}!`,{requiredChildren:_,baObj:this.baObjectHandler.baObject})}this.__data[0].Ending=n.Ending.cutOff,this.__data[0].Behavior=n.Behavior.any,this.__data[0].YAxisExtension=0;for(let[t,i]of l){let a=t[0].toLowerCase();if("x"!==a&&"y"!==a)continue;let n=t.toLowerCase().replace(a,"");n="y"===a&&"2_3"===n?2:Number(n),"number"==typeof n&&(n-=1,this.baObjectHandler.tryWatchChildrenBaVariable(i,e.BA.BaParameterId.ePresentValue,t=>{null!=t&&("x"!==a&&"y"!==a||null!=this.__data&&(null==this.__data[0].ScaleSetpoints[n]&&(this.__data[0].ScaleSetpoints[n]={x:0,y:0}),"y"===a&&1===n?(this.__data[0].ScaleSetpoints[n][a]=t,this.__data[0].ScaleSetpoints[n+1][a]=t):this.__data[0].ScaleSetpoints[n][a]=t,3===n&&"y"===a?this.__data[0].YMax=t:1===n&&"y"===a&&(this.__data[0].YMin=t),o||this.__processData()))}))}r=null===(s=null===(a=l.get("X1"))||void 0===a?void 0:a.tryGetBaVariable(e.BA.BaParameterId.ePresentValue))||void 0===s?void 0:s.Access.Write,null!=r&&e.Server.UserManagement.checkAccess(r)?this.__data[0].ReadOnly=!1:this.__data[0].ReadOnly=!0,this.baObjectHandler.tryWatchChildrenBaVariable(l.get("Sp"),e.BA.BaParameterId.eUnit,t=>{if(null==t||null==this.__data)return;let i=e.Functions.ConvertUnitToString(t);if(null!=i){for(let t=0;t<this.__data.length;t++)this.__data[t].Unit=i;o||this.__processData()}}),this.__processData(),o=!1;break;default:console.warn("Unknown SubjectInfo passed into Scale!",{subjectIdentifier:this.baObjectHandler.baObject.SubjectInfo,baObj:this.baObjectHandler.baObject})}}}}a.Scale=n,function(t){let i,a,n;!function(t){t.onSave="onScaleSave",t.onReset="onScaleReset"}(i=t.ScaleEvents||(t.ScaleEvents={})),function(t){t[t.any=0]="any",t[t.onlyDecreasing=1]="onlyDecreasing",t[t.onlyIncreasing=2]="onlyIncreasing"}(a=t.Behavior||(t.Behavior={})),function(t){t[t.direct=0]="direct",t[t.infinity=1]="infinity",t[t.limits=2]="limits",t[t.cutOff=3]="cutOff"}(n=t.Ending||(t.Ending={}));class s extends e.Components.Base{constructor(t,e){super(t,e),this.__value=null,this.__snapToValue=!0,this.__snapPeriode=null,this.__range=null,this.__yAxisMax=null,this.__yAxisMin=null,this.__xAxisMax=null,this.__xAxisMin=null,this.__yMax=null,this.__yMin=null,this.__xMax=null,this.__xMin=null,this.__allowVerticalMovement=null,this.__allowHorizontalMovement=null,this.__curMoveX=0,this.__curMoveY=0,this.__selector=$("<div>").addClass("selector"),this.__display=$("<div>").addClass("display"),this.__onElementMovedHandler=(t,e,i,a)=>this.__onElementMoved(e,i,a),this.__pressedHandler=t=>this.__onEditValue(t),this.__element.addClass("scale-setpoint"),this.__element.append(this.__selector),this.__display.append($("<span>")),this.__element.append(this.__display)}__attach(){this.__isAttached||(e.Helper.DragableElement.makeDragable(this.__element,this.__element,{limitXExtension:10,limitYExtension:10,allowHorizontalMovement:this.__allowHorizontalMovement,allowVerticalMovement:this.__allowVerticalMovement}),this.__element.on(e.Helper.DragableElement.DragableElementEvents.onElementMoved,this.__onElementMovedHandler),this.__display.on("click",this.__pressedHandler),this.__updatePosition(),super.__attach())}__detach(){this.__isAttached&&(this.__element.off(e.Helper.DragableElement.DragableElementEvents.onElementMoved,this.__onElementMovedHandler),this.__display.off("click",this.__pressedHandler),super.__detach())}destroy(){super.destroy()}__onElementMoved(t,i,a){if(null===this.__value)return;let n=this.__value.y,s=this.__value.x,l=JSON.parse(JSON.stringify(this.__value));if(0!==i&&this.__allowHorizontalMovement){let e=this.__element.position().left,a=this.__element.parent();if(null!=a){let n=a.offset();if(null!=n){let a=0;switch(t.type){case"mousemove":a=t.pageX-n.left;break;case"touchmove":a=t.touches[0].pageX-n.left}if(i>0)a>e&&(this.__curMoveX=this.__curMoveX+i);else if(i<0){let t=this.__element.outerWidth();null!=t&&a<e+t&&(this.__curMoveX=this.__curMoveX+i)}}}null!==this.__xAxisMax&&null!==this.__xAxisMin&&null!==this.__range&&(s=this.__value.x+(this.__xAxisMax-this.__xAxisMin)/this.__range.Width*this.__curMoveX)}if(0!==a&&this.__allowVerticalMovement){let e=this.__element.position().top,i=this.__element.parent();if(null!=i){let n=i.offset();if(null!=n){let i=0;switch(t.type){case"mousemove":i=t.pageY-n.top;break;case"touchmove":i=t.touches[0].pageY-n.top}if(a>0)i>e&&(this.__curMoveY=this.__curMoveY+a);else if(a<0){let t=this.__element.outerHeight();null!=t&&i<e+t&&(this.__curMoveY=this.__curMoveY+a)}}}null!==this.__yAxisMax&&null!==this.__yAxisMin&&null!==this.__range&&(n=this.__value.y-(this.__yAxisMax-this.__yAxisMin)/this.__range.Height*this.__curMoveY)}null!=s&&(isNaN(s)||null!==this.__snapToValue&&!0===this.__snapToValue&&null!==this.__snapPeriode&&(s=e.Helper.Number.snapToPeriode(s,this.__snapPeriode)),null!==this.__xAxisMax&&null!==this.__xAxisMin&&(null===this.__xMax&&(this.__xMax=this.__xAxisMax),null===this.__xMin&&(this.__xMin=this.__xAxisMin),s>this.__xMax?(s=this.__xMax,this.__curMoveX=0):s<this.__xMin&&(s=this.__xMin,this.__curMoveX=0)),s!==this.__value.x&&(l.x=s,this.__curMoveX=0)),null!=n&&(isNaN(n)||null!==this.__snapToValue&&!0===this.__snapToValue&&null!==this.__snapPeriode&&(n=e.Helper.Number.snapToPeriode(n,this.__snapPeriode)),null!==this.__yAxisMax&&null!==this.__yAxisMin&&(null===this.__yMax&&(this.__yMax=this.__yAxisMax),null===this.__yMin&&(this.__yMin=this.__yAxisMin),n>this.__yMax?(n=this.__yMax,this.__curMoveY=0):n<this.__yMin&&(n=this.__yMin,this.__curMoveY=0)),n!==this.__value.y&&(l.y=n,this.__curMoveY=0)),tchmi_equal(l,this.__value)?this.__updatePosition():this.setValue(l)}__onEditValue(t){return __awaiter(this,void 0,void 0,(function*(){return new Promise((i,a)=>__awaiter(this,void 0,void 0,(function*(){if(t.stopPropagation(),"click"===t.type&&0!==t.button)return void i();if(null===this.__value||null===this.__xAxisMin||null===this.__xAxisMax||null===this.__yAxisMin||null===this.__yAxisMax)return void i();let a={x:this.__value.x,y:this.__value.y};null===this.__xMax&&(this.__xMax=this.__xAxisMax),null===this.__xMin&&(this.__xMin=this.__xAxisMin);let n=yield e.Components.DialogWindow.promptNumericWithLimits(yield"New x value",this.__value.x,this.__xMin,this.__xMax);null!=n&&(a.x=n),null===this.__yMax&&(this.__yMax=this.__yAxisMax),null===this.__yMin&&(this.__yMin=this.__yAxisMin);let s=yield e.Components.DialogWindow.promptNumericWithLimits(yield"New y value",this.__value.x,this.__xMin,this.__xMax);null!=s&&(a.y=s),this.setValue(a),i()})))}))}__updatePosition(){if(null!=this.__range&&null!==this.__value&&null!==this.__yAxisMin&&null!==this.__yAxisMax&&null!==this.__xAxisMin&&null!==this.__xAxisMax){let t=this.__element.outerHeight(),e=this.__element.outerWidth();null!=t&&null!=e&&t>0&&e>0&&this.__element.css({top:this.__range.Height-(this.__range.Height/(this.__yAxisMax-this.__yAxisMin)*(this.__value.y-this.__yAxisMin)+t/2),left:this.__range.Width/(this.__xAxisMax-this.__xAxisMin)*(this.__value.x-this.__xAxisMin)-e/2-2})}}setValue(t){return null===t||tchmi_equal(t,this.__value)||(this.__value=t,this.eventHandler.raise(s.SetpointEvents.onSetpointValueChanged,this),this.__processValue()),this}__processValue(){null!==this.__value&&(this.__display.find("span").text("x: "+this.__value.x+" | y: "+this.__value.y),this.__updatePosition())}getValue(){return this.__value}setSnapPeriode(t){return null===t||tchmi_equal(t,this.__snapPeriode)||(this.__snapPeriode=t,this.__updatePosition()),this}getSnapPeriode(){return this.__snapPeriode}setRange(t){return null==t||tchmi_equal(t,this.__range)||(this.__range=t,this.__updatePosition()),this}getRange(){return this.__range}setYAxisMax(t){return null==t||tchmi_equal(t,this.__yAxisMax)||(this.__yAxisMax=t,this.__updatePosition()),this}getYAxisMax(){return this.__yAxisMax}setYAxisMin(t){return null==t||tchmi_equal(t,this.__yAxisMin)||(this.__yAxisMin=t,this.__updatePosition()),this}getYAxisMin(){return this.__yAxisMin}setXAxisMax(t){return null===t||tchmi_equal(t,this.__xAxisMax)||(this.__xAxisMax=t,this.__updatePosition()),this}getXAxisMax(){return this.__xAxisMax}setXAxisMin(t){return null===t||tchmi_equal(t,this.__xAxisMin)||(this.__xAxisMin=t,this.__updatePosition()),this}getXAxisMin(){return this.__xAxisMin}setYMax(t){return null==t||tchmi_equal(t,this.__yMax)||(this.__yMax=t,null!==this.__value&&this.__value.y>this.__yMax&&this.setValue({x:this.__value.x,y:this.__yMax})),this}getYMax(){return this.__yMax}setYMin(t){return null==t||tchmi_equal(t,this.__yMin)||(this.__yMin=t,null!==this.__value&&this.__value.y<this.__yMin&&this.setValue({x:this.__value.x,y:this.__yMin})),this}getYMin(){return this.__yMin}setXMax(t){return null===t||tchmi_equal(t,this.__xMax)||(this.__xMax=t,null!==this.__value&&this.__value.x>this.__xMax&&this.setValue({x:this.__xMax,y:this.__value.y})),this}getXMax(){return this.__xMax}setXMin(t){return null===t||tchmi_equal(t,this.__xMin)||(this.__xMin=t,null!==this.__value&&this.__value.x<this.__xMin&&this.setValue({x:this.__xMin,y:this.__value.y})),this}getXMin(){return this.__xMin}setAllowVerticalMovement(t){return null===t||tchmi_equal(t,this.__allowVerticalMovement)||(this.__allowVerticalMovement=t,e.Helper.DragableElement.makeDragable(this.__element,this.__element,{limitXExtension:10,limitYExtension:10,allowHorizontalMovement:this.__allowHorizontalMovement,allowVerticalMovement:this.__allowVerticalMovement})),this}getAllowVerticalMovement(){return this.__allowVerticalMovement}setAllowHorizontalMovement(t){return null===t||tchmi_equal(t,this.__allowHorizontalMovement)||(this.__allowHorizontalMovement=t,e.Helper.DragableElement.makeDragable(this.__element,this.__element,{limitXExtension:10,limitYExtension:10,allowHorizontalMovement:this.__allowHorizontalMovement,allowVerticalMovement:this.__allowVerticalMovement})),this}getAllowHorizontalMovement(){return this.__allowHorizontalMovement}}t.Setpoint=s,function(t){let e;!function(t){t.onSetpointValueChanged="onSetpointValueChanged"}(e=t.SetpointEvents||(t.SetpointEvents={}))}(s=t.Setpoint||(t.Setpoint={}))}(n=a.Scale||(a.Scale={}))}(i.Common||(i.Common={}))}(e.Controls||(e.Controls={}))}(t.BuildingAutomation||(t.BuildingAutomation={}))}(TcHmi||(TcHmi={})),TcHmi.Controls.registerEx("Scale","TcHmi.BuildingAutomation.Controls.Common",TcHmi.BuildingAutomation.Controls.Common.Scale);