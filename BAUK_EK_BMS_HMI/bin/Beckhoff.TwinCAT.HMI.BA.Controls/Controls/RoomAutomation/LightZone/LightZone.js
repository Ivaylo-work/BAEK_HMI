var TcHmi;!function(t){!function(e){!function(a){!function(n){class o extends a.System.BaseControl{constructor(t,e,a){super(t,e,a)}__previnit(){if(super.__previnit(),this.baObjectHandler=new e.BaObjectHandler(this),this.__container=this.getElement().find(".container"),null==this.__container[0])throw new Error("Invalid template!");const t=this.__container.find(".body");if(2!=t.length)throw new Error("Invalid template!");this.baInterfaceHandler=new e.BaInterfaceHandler(this),this.baInterfaceHandler.baInterfaceDefinition=o.BaInterfaceDef,this.setBaInterfaceSymbolNames(o.BaInterfaceSymbolNames),this.__manualValueInput=new e.Components.InputBox(this.__id+"-manual-value-input",this,{dataType:e.DataType.number,digits:1,unit:"%",readOnly:!1,textAttributes:{verticalAlignment:"Center"},cssClass:"manual-value-input"}),this.__writeManualValueButton=new e.Components.Button(this.__id+"-write-manual-value-button",this,{background:{image:e.Icons.RoomAutomation.Manual.path},cssClass:"write-manual-value-button"}),this.__resetControlModeButton=new e.Components.Button(this.__id+"-reset-control-mode-button",this,{background:{image:e.Icons.RoomAutomation.ResetManual.path},cssClass:"reset-control-mode-button"}),this.__activationModeCombobox=new e.Components.Combobox(this.__id+"-activation-mode-combobox",this,{readOnly:!1,data:[{value:0,text:"Full-automatic"},{value:1,text:"Semi-automatic"}],cssClass:"activation-mode-combobox"}),$(t[0]).append(this.__manualValueInput.getElement()),$(t[0]).append(this.__writeManualValueButton.getElement()),$(t[0]).append(this.__resetControlModeButton.getElement()),$(t[1]).append(this.__activationModeCombobox.getElement())}__init(){super.__init()}__attach(){super.__attach(),this.__destroyersToCallOnDetach.push(this.__manualValueInput.eventHandler.register(e.Components.InputBox.InputBoxEvents.onUserInteractionFinished,()=>{var t;null!=this.baObjectHandler.baObject&&this.baObjectHandler.baObject.checkAddParams(o.BaInterfaceDef,this.baInterfaceHandler.baInterfaceSymNames)&&(null===(t=this.baObjectHandler.baObject.tryGetBaVariable("manualValue"))||void 0===t||t.write(this.__manualValueInput.getValue()))})),this.__destroyersToCallOnDetach.push(this.__writeManualValueButton.eventHandler.register(e.Components.Button.ButtonEvents.onPressed,()=>{var t;null!=this.baObjectHandler.baObject&&this.baObjectHandler.baObject.checkAddParams(o.BaInterfaceDef,this.baInterfaceHandler.baInterfaceSymNames)&&(null===(t=this.baObjectHandler.baObject.tryGetBaVariable("writeManualValue"))||void 0===t||t.write(!0))})),this.__destroyersToCallOnDetach.push(this.__resetControlModeButton.eventHandler.register(e.Components.Button.ButtonEvents.onPressed,()=>{var t;null!=this.baObjectHandler.baObject&&this.baObjectHandler.baObject.checkAddParams(o.BaInterfaceDef,this.baInterfaceHandler.baInterfaceSymNames)&&(null===(t=this.baObjectHandler.baObject.tryGetBaVariable("activateControlMode"))||void 0===t||t.write(!0))})),this.__destroyersToCallOnDetach.push(this.__activationModeCombobox.eventHandler.register(e.Components.Combobox.ComboboxEvents.onSelectedValueChanged,()=>{var t;null!=this.baObjectHandler.baObject&&this.baObjectHandler.baObject.checkAddParams(o.BaInterfaceDef,this.baInterfaceHandler.baInterfaceSymNames)&&(null===(t=this.baObjectHandler.baObject.tryGetBaVariable("activationMode"))||void 0===t||t.write(this.__activationModeCombobox.getSelectedValue()))}));const t=this.__container.find(".header");if(2!=t.length)throw new Error("Invalid template!");this.__destroyersToCallOnDetach.push(e.Locale.Localization.watchText(e.Locale.LangKey.Settings,a=>{e.Logger.checkServerResult(e.Logger.Severity.warn,a)&&null!=a.text&&$(t[0]).text(a.text)})),this.__destroyersToCallOnDetach.push(e.Locale.Localization.watchText(e.Locale.LangKey.ActivationMode,a=>{e.Logger.checkServerResult(e.Logger.Severity.warn,a)&&null!=a.text&&$(t[1]).text(a.text)}))}__detach(){super.__detach(),null!=this.__unregisterManualValueChange&&this.__unregisterManualValueChange(),null!=this.__unregisterActivationModeChanged&&this.__unregisterActivationModeChanged()}destroy(){this.__keepAlive||(this.__manualValueInput.destroy(),this.__writeManualValueButton.destroy(),this.__resetControlModeButton.destroy(),this.__activationModeCombobox.destroy(),super.destroy())}__setManualValue(t){return this.__attrHandler.checkAttribute(t,"manualValue",{validator:"number"})?(this.__attrHandler.manualValue=t,this.__manualValueInput.setValue(t),this):this}__setControlModeActive(t){return this.__attrHandler.checkAttribute(t,"controlModeActive",{validator:"boolean"})?(this.__attrHandler.controlModeActive=t,t?this.__resetControlModeButton.setIsEnabled(!1).backgroundStyler.setImageColor(e.Color.RGBAColor.TcHmiGreen):this.__resetControlModeButton.setIsEnabled(!0).backgroundStyler.setImageColor(null),this):this}__setActivationMode(t){return this.__attrHandler.checkAttribute(t,"activationMode",{validator:"number"})?(this.__attrHandler.activationMode=t,this.__activationModeCombobox.setSelectedValue(t),this):this}__processReadOnly(){super.__processReadOnly(),this.__manualValueInput.setReadOnly(this.__attrHandler.readOnly),this.__writeManualValueButton.setReadOnly(this.__attrHandler.readOnly),this.__resetControlModeButton.setReadOnly(this.__attrHandler.readOnly),this.__activationModeCombobox.setReadOnly(this.__attrHandler.readOnly)}setBaObject(t){return this.baObjectHandler.setBaObject(t),this}getBaObject(){return this.baObjectHandler.baObject}setBaInterface(t){return this.baInterfaceHandler.setBaInterfaceSym(t,()=>{this.baInterfaceHandler.watchSubSymbol("manualValue",t=>{this.__setManualValue(t)}),this.baInterfaceHandler.watchSubSymbol("controlModeActive",t=>{this.__setControlModeActive(t)}),this.baInterfaceHandler.watchSubSymbol("activationMode",t=>{this.__setActivationMode(t)})}),this}getBaInterface(){return this.baInterfaceHandler.getBaInterfaceSym()}setBaInterfaceSymbolNames(t){return null!=t&&(this.baInterfaceHandler.baInterfaceSymNames=e.BaInterfaceHandler.convertToBaInterfaceSymbolNames(t)),this}getBaInterfaceSymbolNames(){return this.baInterfaceHandler.baInterfaceDescription}processBaObject(){if(null!=this.baObjectHandler.baObject)if(this.baObjectHandler.baObject.checkAddParams(o.BaInterfaceDef,this.baInterfaceHandler.baInterfaceSymNames)){const t=this.baObjectHandler.baObject.tryGetBaVariable("manualValue");null!=t&&t.watch(t=>{this.__setManualValue(t)});const a=this.baObjectHandler.baObject.tryGetBaVariable("controlModeActive");null!=a&&a.watch(t=>{this.__setControlModeActive(t)});const n=this.baObjectHandler.baObject.tryGetBaVariable("activationMode");null!=n&&(this.baObjectHandler.watchValueRange(n,t=>{this.__activationModeCombobox.setData(e.Components.Combobox.toComboboxItemArray(t))}),n.watch(t=>{this.__setActivationMode(t)}))}else this.baObjectHandler.baObject.logInvalidBaObject(this.__id,!0)}}n.LightZone=o,function(a){let n;!function(t){t[t.fullAutomatic=0]="fullAutomatic",t[t.semiAutomatic=1]="semiAutomatic"}(n=a.ActivationMode||(a.ActivationMode={})),a.BaInterfaceDef={manualValue:{type:"number"},writeManualValue:{type:"boolean"},controlModeActive:{type:"boolean"},activateControlMode:{type:"boolean"},activationMode:{type:"number"}},a.BaInterfaceSymbolNames={manualValue:{symbolName:"fSetValMan_In"},writeManualValue:{symbolName:"bSetValMan_In"},controlModeActive:{symbolName:"bCtrlMod_Out"},activateControlMode:{symbolName:"bSetCtrlMod_In"},activationMode:{symbolName:"eLightActivationMode_In"}},a.openLightZoneDialog=function(a){let n=0;for(;null!=t.Controls.get("Light-zone-dialog-"+n);)n++;const o=t.ControlFactory.createEx("TcHmi.BuildingAutomation.Controls.RoomAutomation.LightZone","Light-zone-dialog-"+n,null,t.View.get());null==o||o.getElement().addClass("in-dialog");let i=e.Components.DialogWindow.createDialogWindow({appearance:{content:null==o?void 0:o.getElement(),buttons:e.Components.DialogWindow.Buttons.Cancel,layout:{width:191,height:183},headline:{textAttributes:{text:"Light zone settings"}}},callbacks:{cbClosed:()=>{null==o||o.destroy()}},behaviour:{destroyOnClose:!0}});null==o||o.baObjectHandler.onBaObjectChanged(t=>{o.baObjectHandler.tryWatchBaVariable(e.BA.BaParameterId.eDescription,t=>{null==i||i.setHeadlineText(t)})}),null==o||o.setBaObject(a),null==i||i.open()}}(o=n.LightZone||(n.LightZone={}))}(a.RoomAutomation||(a.RoomAutomation={}))}(e.Controls||(e.Controls={}))}(t.BuildingAutomation||(t.BuildingAutomation={}))}(TcHmi||(TcHmi={})),TcHmi.Controls.registerEx("LightZone","TcHmi.BuildingAutomation.Controls.RoomAutomation",TcHmi.BuildingAutomation.Controls.RoomAutomation.LightZone);