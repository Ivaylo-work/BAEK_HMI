var TcHmi,__awaiter=this&&this.__awaiter||function(e,t,i,s){return new(i||(i=Promise))((function(a,o){function n(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(n,r)}l((s=s.apply(e,t||[])).next())}))};!function(e){!function(t){!function(i){!function(s){class a extends i.Common.UiIcon{constructor(e,i,s){super(e,i,s),this.__loadBaChildren=!0,this.__loadTexts=!1,this.__enableParentBaObjectProcessor=!0,this.baTemplateHandler=new t.BA.BaTemplateHandler}__previnit(){this.baTemplateHandler.defaultBaTemplateDescription=this.__defaultBaTemplateDescription,super.__previnit(),this.__baFc.baObjectHandler.loadChildren=this.__loadBaChildren,this.__baFc.baObjectHandler.loadTexts=this.__loadTexts,this.__baFc.baObjectHandler.enableParentBaObjectProcessor=this.__enableParentBaObjectProcessor}__init(){this.__processDisplaysData(),super.__init()}__attach(){super.__attach()}__detach(){super.__detach()}destroy(){this.__keepAlive||super.destroy()}__obtainBaBasicObject(i){return new Promise((s,a)=>__awaiter(this,void 0,void 0,(function*(){if(i)if(i instanceof e.Symbol){let a=i.getExpression();if(a.getType()!=e.SymbolType.Server)throw new Error("Passed BaObject is not a server symbol!");const o=a.getName();if(null==o)throw new Error("Unknown error!");t.BaObjectHandler.readBaObject(o,this.__loadBaChildren).then(e=>__awaiter(this,void 0,void 0,(function*(){s(e)}))).catch(e=>this.logger.log(t.Logger.Severity.error,e))}else i instanceof t.BA.BaBasicObject&&s(i);else s(null)})))}__processShowFeedback(){this.__processDisplaysData()}__processShowSetpoint(){this.__processDisplaysData()}__processDisplayPositionDesigner(){if(null==this.__displayPosition)return;let e=this.__baFc.getDisplays();if(null!=e)for(const t of e.keys())this.__baFc.setDisplayPosition(t,this.__displayPosition)}__processDisplaysData(){let e;this.__showSetpoint?(e=this.__baFc.getDisplay(a.setpointDisplayName),null==e&&(e=this.__baFc.addDisplay(a.setpointDisplayName,{position:this.__displayPosition,order:2,readOnly:!0,textAttributes:{fontWeight:"Bold",color:t.Color.RGBAColor.TcHmiBlue}})),this.__baFc.updateDisplay(a.setpointDisplayName,{position:this.__displayPosition,baObject:this.__setpoint,value:null==this.__setpoint?"???":void 0})):this.__baFc.removeDisplay(a.setpointDisplayName),this.__showFeedback?(e=this.__baFc.getDisplay(a.feedbackDisplayName),null==e&&(e=this.__baFc.addDisplay(a.feedbackDisplayName,{position:this.__displayPosition,order:1,readOnly:!0,textAttributes:{fontWeight:"Bold"}})),this.__baFc.updateDisplay(a.feedbackDisplayName,{position:this.__displayPosition,baObject:this.__feedback,value:null==this.__feedback?"???":void 0})):this.__baFc.removeDisplay(a.feedbackDisplayName)}setFeedback(e){return this.__obtainBaBasicObject(e).then(e=>{this.__feedback=e,this.__processDisplaysData()}),this}getFeedback(){return this.__feedback}setSetpoint(e){return this.__obtainBaBasicObject(e).then(e=>{this.__setpoint=e,this.__processDisplaysData()}),this}getSetpoint(){return this.__setpoint}setCommand(i){return this.__baFc.setIsActive(!1),this.__obtainBaBasicObject(i).then(i=>{this.__command=i,this.__command&&this.__baFc.baObjectHandler.tryWatchChildrenBaVariable(this.__command,t.BA.BaParameterId.ePresentValue,t=>{let i=null,s=!1;"boolean"==typeof t?(i=e.ValueConverter.toBoolean(t),null!=i&&(s=i)):"number"==typeof t?(i=e.ValueConverter.toNumber(t),null!=i&&(s=1!==i)):"string"==typeof t&&(s=!1),this.__baFc.setIsActive(s)})}),this}getCommand(){return this.__command}setBaTemplateDescription(t){return null==t&&(t=this.getAttributeDefaultValueInternal("BaTemplateDescription")),this.baTemplateHandler.setBaTemplateDescription(t),this.processBaObject(),e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"BaTemplateDescription"}),this}getBaTemplateDescription(){return this.baTemplateHandler.getBaTemplateDescription()}setShowFeedback(t){let i=e.ValueConverter.toBoolean(t);return null==i&&(i=this.getAttributeDefaultValueInternal("ShowFeedback")),tchmi_equal(i,this.__showFeedback)||(this.__showFeedback=i,this.__processShowFeedback(),e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowFeedback"})),this}getShowFeedback(){return this.__showFeedback}setShowSetpoint(t){let i=e.ValueConverter.toBoolean(t);return null==i&&(i=this.getAttributeDefaultValueInternal("ShowSetpoint")),tchmi_equal(i,this.__showSetpoint)||(this.__showSetpoint=i,this.__processShowSetpoint(),e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowSetpoint"})),this}getShowSetpoint(){return this.__showSetpoint}setDisplayPositionDesigner(t){let i=e.ValueConverter.toNumber(t);return null==i&&(i=this.getAttributeDefaultValueInternal("DisplayPosition")),tchmi_equal(i,this.__displayPosition)||(this.__displayPosition=i,this.__processDisplayPositionDesigner(),e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"DisplayPosition"})),this}getDisplayPositionDesigner(){return this.__displayPosition}setDisplayMode(t){let i=e.ValueConverter.toNumber(t);return null==i&&(i=this.getAttributeDefaultValueInternal("DisplayMode")),null==i||tchmi_equal(i,this.__displayMode)||(this.__displayMode=i,this.__processDisplayMode(),e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"DisplayMode"})),this}__processDisplayMode(){this.__displayMode===a.CustomDisplayModeValue&&this.__processIcon()}getDisplayMode(){return this.__displayMode}processBaObject(){super.processBaObject()}__processIcon(){this.__displayMode===a.CustomDisplayModeValue&&super.__processIcon()}}a.setpointDisplayName="setpoint-display",a.feedbackDisplayName="feedback-display",s.UiIconFdbStp=a,function(e){e.CustomDisplayModeValue=999}(a=s.UiIconFdbStp||(s.UiIconFdbStp={}))}(i.System||(i.System={}))}(t.Controls||(t.Controls={}))}(e.BuildingAutomation||(e.BuildingAutomation={}))}(TcHmi||(TcHmi={})),TcHmi.Controls.registerEx("UiIconFdbStp","TcHmi.BuildingAutomation.Controls.System",TcHmi.BuildingAutomation.Controls.System.UiIconFdbStp);