var TcHmi;!function(e){!function(t){!function(o){!function(n){class i extends o.System.BaseTemplate{constructor(e,o,n){super(e,o,n),this.__defaultBaTemplateDescription=i.BaTemplateDescription,this.__legendIconHandler=new t.Components.LegendIconHandler}__previnit(){let o=$("<div>").addClass("connection flow"),i=$("<div>").addClass("connection return");this.__element.append([o,i]),this.__main=e.ControlFactory.createEx("TcHmi.BuildingAutomation.Controls.Common.UiIcon",this.__id+"-main",null,this),null!=this.__main&&(this.__main.setIcon(t.Icons.HVAC.Cooler.path).getElement().addClass("main"),this.__element.append(this.__main.getElement()),this.__legendIconHandler.icon=t.Icons.HVAC.Cooler),this.__flowTempSensor=e.ControlFactory.createEx("TcHmi.BuildingAutomation.Controls.Plants.SensorAnalog",this.__id+"-flow-temp-sensor",null,this),null!=this.__flowTempSensor&&(this.__flowTempSensor.setDisplayMode(n.SensorAnalog.DisplayMode.temperature).setConnections({bottom:0}).setDisplayPositionDesigner(t.Components.UiIcon.DisplayPosition.top).getElement().addClass("flow-temp-sensor"),this.__element.append(this.__flowTempSensor.getElement())),this.__returnTempSensor=e.ControlFactory.createEx("TcHmi.BuildingAutomation.Controls.Plants.SensorAnalog",this.__id+"-return-temp-sensor",null,this),null!=this.__returnTempSensor&&(this.__returnTempSensor.setDisplayMode(n.SensorAnalog.DisplayMode.temperature).setConnections({bottom:0}).setDisplayPositionDesigner(t.Components.UiIcon.DisplayPosition.top).getElement().addClass("return-temp-sensor"),this.__element.append(this.__returnTempSensor.getElement())),this.__valve=e.ControlFactory.createEx("TcHmi.BuildingAutomation.Controls.Plants.Valve",this.__id+"-valve",null,this),null!=this.__valve&&(this.__valve.getElement().addClass("valve"),this.__element.append(this.__valve.getElement())),super.__previnit()}__init(){super.__init()}__attach(){super.__attach(),this.onResized(),this.__legendIconHandler.show()}__detach(){super.__detach(),this.__legendIconHandler.hide()}destroy(){var e,t,o,n;this.__keepAlive||(null===(e=this.__main)||void 0===e||e.destroy(),null===(t=this.__flowTempSensor)||void 0===t||t.destroy(),null===(o=this.__returnTempSensor)||void 0===o||o.destroy(),null===(n=this.__valve)||void 0===n||n.destroy(),super.destroy())}onResized(){if(!this.__isAttached)return;let e=this.__element.width(),t=this.__element.children(".connection.flow").position().left,o=this.__element.children(".connection.return").position().left,i=this.__element.children(".connection.return").width();if(this.__flowTempSensor){let e=this.__flowTempSensor.getElement().width();this.__flowTempSensor.setConnections({right:t-e})}if(this.__returnTempSensor){let t=this.__returnTempSensor.getElement().width();this.__returnTempSensor.setConnections({left:e-o-i-t})}if(this.__valve){let e=this.__valve.getElement().position().left,t=this.__valve.getElement().width();null!=this.__attrHandler.valveDisplayMode&&this.__attrHandler.valveDisplayMode>=n.Valve.DisplayMode.threeDirection_0&&this.__attrHandler.valveDisplayMode<=n.Valve.DisplayMode.threeDirection_3?this.__valve.setConnections({right:o-e-t}):this.__valve.setConnections(null)}}setFlowPipeColor(t){let o=e.ValueConverter.toObject(t);return null==o&&(o=this.getAttributeDefaultValueInternal("FlowPipeColor")),tchmi_equal(o,this.__attrHandler.flowPipeColor)||(this.__attrHandler.flowPipeColor=o,this.__processFlowPipeColor(),e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"FlowPipeColor"})),this}__processFlowPipeColor(){var o;this.__attrHandler.flowPipeColor&&(e.StyleProvider.processBackgroundColor(this.__element.children(".connection.flow"),this.__attrHandler.flowPipeColor),null===(o=this.__flowTempSensor)||void 0===o||o.setConnectionColors(t.Color.RGBAColor.fromSolidColor(this.__attrHandler.flowPipeColor)))}getFlowPipeColor(){return this.__attrHandler.flowPipeColor}setReturnPipeColor(t){let o=e.ValueConverter.toObject(t);return null==o&&(o=this.getAttributeDefaultValueInternal("ReturnPipeColor")),tchmi_equal(o,this.__attrHandler.returnPipeColor)||(this.__attrHandler.returnPipeColor=o,this.__processReturnPipeColor(),e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ReturnPipeColor"})),this}__processReturnPipeColor(){var o,n;this.__attrHandler.returnPipeColor&&(e.StyleProvider.processBackgroundColor(this.__element.children(".connection.return"),this.__attrHandler.returnPipeColor),null===(o=this.__returnTempSensor)||void 0===o||o.setConnectionColors(t.Color.RGBAColor.fromSolidColor(this.__attrHandler.returnPipeColor)),null===(n=this.__valve)||void 0===n||n.setConnectionColors(t.Color.RGBAColor.fromSolidColor(this.__attrHandler.returnPipeColor)))}getReturnPipeColor(){return this.__attrHandler.returnPipeColor}setDisplayModeValve(t){if(null==this.__valve)return this;let o=e.ValueConverter.toNumber(t);return null==o&&(o=this.getAttributeDefaultValueInternal("ValveDisplayMode")),tchmi_equal(o,this.__attrHandler.valveDisplayMode)||(this.__valve.setDisplayMode(o),this.__attrHandler.valveDisplayMode=o,this.__processDisplayModeValve(),e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ValveDisplayMode"})),this}__processDisplayModeValve(){this.onResized()}getDisplayModeValve(){return this.__attrHandler.valveDisplayMode}setShowFeedbackValve(e){var t;return null===(t=this.__valve)||void 0===t||t.setShowFeedback(e),this}getShowFeedbackValve(){var e;return null===(e=this.__valve)||void 0===e?void 0:e.getShowFeedback()}setShowSetpointValve(e){var t;return null===(t=this.__valve)||void 0===t||t.setShowSetpoint(e),this}getShowSetpointValve(){var e;return null===(e=this.__valve)||void 0===e?void 0:e.getShowSetpoint()}setSetpointSensorFlow(e){var t;return null===(t=this.__flowTempSensor)||void 0===t||t.setSetpointDesigner(e),this}setShowFeedbackSensorFlow(e){var t;return null===(t=this.__flowTempSensor)||void 0===t||t.setShowFeedback(e),this}getShowFeedbackSensorFlow(){var e;return null===(e=this.__flowTempSensor)||void 0===e?void 0:e.getShowFeedback()}setShowSetpointSensorFlow(e){var t;return null===(t=this.__flowTempSensor)||void 0===t||t.setShowSetpoint(e),this}getShowSetpointSensorFlow(){var e;return null===(e=this.__flowTempSensor)||void 0===e?void 0:e.getShowSetpoint()}setSetpointSensorReturn(e){var t;return null===(t=this.__returnTempSensor)||void 0===t||t.setSetpointDesigner(e),this}setShowFeedbackSensorReturn(e){var t;return null===(t=this.__returnTempSensor)||void 0===t||t.setShowFeedback(e),this}getShowFeedbackSensorReturn(){var e;return null===(e=this.__returnTempSensor)||void 0===e?void 0:e.getShowFeedback()}setShowSetpointSensorReturn(e){var t;return null===(t=this.__returnTempSensor)||void 0===t||t.setShowSetpoint(e),this}getShowSetpointSensorReturn(){var e;return null===(e=this.__returnTempSensor)||void 0===e?void 0:e.getShowSetpoint()}processBaObject(){var e,o,n,l,s;if(super.processBaObject(),null===(e=this.__main)||void 0===e||e.setBaObject(null),null===(o=this.__flowTempSensor)||void 0===o||o.setBaObject(null),null===(n=this.__returnTempSensor)||void 0===n||n.setBaObject(null),null===(l=this.__valve)||void 0===l||l.setBaObject(null),null!=this.baObjectHandler.baObject&&this.baObjectHandler.baObject.checkTemplate(i.BaTemplateDefinition,this.baTemplateHandler.baBaTemplateDescription,this,!0)){if(null===(s=this.__main)||void 0===s||s.setBaObject(this.baObjectHandler.baObject),this.__flowTempSensor){let e=this.baObjectHandler.baObject.getTemplateChild("tempFlow");e instanceof t.BA.BaView?(this.__flowTempSensor.baTemplateHandler.setBaTemplateDescriptionInternal(this.baTemplateHandler.baBaTemplateDescription.tempFlow.subTemplate),this.__flowTempSensor.setBaObject(e),this.__flowTempSensor.getIsAttached()||this.__element.append(this.__flowTempSensor.getElement())):(this.__flowTempSensor.setBaObject(null),this.__flowTempSensor.getIsAttached()&&this.__flowTempSensor.getElement().detach())}if(this.__returnTempSensor){let e=this.baObjectHandler.baObject.getTemplateChild("tempReturn");e instanceof t.BA.BaView?(this.__returnTempSensor.baTemplateHandler.setBaTemplateDescriptionInternal(this.baTemplateHandler.baBaTemplateDescription.tempReturn.subTemplate),this.__returnTempSensor.setBaObject(e),this.__returnTempSensor.getIsAttached()||this.__element.append(this.__returnTempSensor.getElement())):(this.__returnTempSensor.setBaObject(null),this.__returnTempSensor.getIsAttached()&&this.__returnTempSensor.getElement().detach())}if(this.__valve){let e=this.baObjectHandler.baObject.getTemplateChild("valve");e instanceof t.BA.BaView?(this.__valve.baTemplateHandler.setBaTemplateDescriptionInternal(this.baTemplateHandler.baBaTemplateDescription.valve.subTemplate),this.__valve.setBaObject(e),this.__valve.getIsAttached()||(this.__element.append(this.__valve.getElement()),this.onResized())):(this.__valve.setBaObject(null),this.__valve.getIsAttached()&&this.__valve.getElement().detach())}}}__processShowTags(){var e,o,n,l,s,r,a,_;super.__processShowTags(),this.__attrHandler.showTags?(null===(e=this.__main)||void 0===e||e.setShowTag(t.Components.UiIcon.DisplayPosition.top),null===(o=this.__flowTempSensor)||void 0===o||o.setShowTag(i.TemperatureSensorTagPosition),null===(n=this.__returnTempSensor)||void 0===n||n.setShowTag(i.TemperatureSensorTagPosition),null===(l=this.__valve)||void 0===l||l.setShowTag(t.Components.UiIcon.DisplayPosition.left)):(null===(s=this.__main)||void 0===s||s.setShowTag(null),null===(r=this.__flowTempSensor)||void 0===r||r.setShowTag(null),null===(a=this.__returnTempSensor)||void 0===a||a.setShowTag(null),null===(_=this.__valve)||void 0===_||_.setShowTag(null))}}n.Cooler=i,function(e){e.BaTemplateDefinition={tempFlow:{subTemplate:n.SensorAnalog.BaTemplateDefinition,optional:!0},tempReturn:{subTemplate:n.SensorAnalog.BaTemplateDefinition,optional:!0},valve:{subTemplate:n.Valve.BaTemplateDefinition,optional:!0}},e.BaTemplateDescription={tempFlow:{identifier:"TFl",subTemplate:n.SensorAnalog.BaTemplateDescription},tempReturn:{identifier:"TRt",subTemplate:n.SensorAnalog.BaTemplateDescription},valve:{identifier:"Vlv",subTemplate:n.Valve.BaTemplateDescription_TwoPoint}},e.TemperatureSensorTagPosition=t.Components.UiIcon.DisplayPosition.bottom}(i=n.Cooler||(n.Cooler={}))}(o.Plants||(o.Plants={}))}(t.Controls||(t.Controls={}))}(e.BuildingAutomation||(e.BuildingAutomation={}))}(TcHmi||(TcHmi={})),TcHmi.Controls.registerEx("Cooler","TcHmi.BuildingAutomation.Controls.Plants",TcHmi.BuildingAutomation.Controls.Plants.Cooler);